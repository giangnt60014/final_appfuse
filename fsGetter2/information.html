<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns='http://www.w3.org/1999/xhtml' xmlns:b='http://www.google.com/2005/gml/b' xmlns:data='http://www.google.com/2005/gml/data' xmlns:expr='http://www.google.com/2005/gml/expr'>
<head>
<meta content='text/html; charset=UTF-8' http-equiv='Content-Type'/>
<script type="text/javascript">(function() { var b=window,f="chrome",g="tick",k="jstiming";(function(){function d(a){this.t={};this.tick=function(a,d,c){var e=void 0!=c?c:(new Date).getTime();this.t[a]=[e,d];if(void 0==c)try{b.console.timeStamp("CSI/"+a)}catch(h){}};this[g]("start",null,a)}var a;b.performance&&(a=b.performance.timing);var n=a?new d(a.responseStart):new d;b.jstiming={Timer:d,load:n};if(a){var c=a.navigationStart,h=a.responseStart;0<c&&h>=c&&(b[k].srt=h-c)}if(a){var e=b[k].load;0<c&&h>=c&&(e[g]("_wtsrt",void 0,c),e[g]("wtsrt_","_wtsrt",h),e[g]("tbsd_","wtsrt_"))}try{a=null,
b[f]&&b[f].csi&&(a=Math.floor(b[f].csi().pageT),e&&0<c&&(e[g]("_tbnd",void 0,b[f].csi().startE),e[g]("tbnd_","_tbnd",c))),null==a&&b.gtbExternal&&(a=b.gtbExternal.pageT()),null==a&&b.external&&(a=b.external.pageT,e&&0<c&&(e[g]("_tbnd",void 0,b.external.startE),e[g]("tbnd_","_tbnd",c))),a&&(b[k].pt=a)}catch(p){}})();b.tickAboveFold=function(d){var a=0;if(d.offsetParent){do a+=d.offsetTop;while(d=d.offsetParent)}d=a;750>=d&&b[k].load[g]("aft")};var l=!1;function m(){l||(l=!0,b[k].load[g]("firstScrollTime"))}b.addEventListener?b.addEventListener("scroll",m,!1):b.attachEvent("onscroll",m);
 })();</script>
<meta content='blogger' name='generator'/>
<link href='http://balusc.blogspot.com/favicon.ico' rel='icon' type='image/x-icon'/>
<link href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html' rel='canonical'/>
<link rel="alternate" type="application/atom+xml" title="The BalusC Code - Atom" href="http://balusc.blogspot.com/feeds/posts/default" />
<link rel="alternate" type="application/rss+xml" title="The BalusC Code - RSS" href="http://balusc.blogspot.com/feeds/posts/default?alt=rss" />
<link rel="service.post" type="application/atom+xml" title="The BalusC Code - Atom" href="http://www.blogger.com/feeds/5396570633771229267/posts/default" />

<link rel="alternate" type="application/atom+xml" title="The BalusC Code - Atom" href="http://balusc.blogspot.com/feeds/5771569684313566405/comments/default" />
<link href='https://plus.google.com/113917986381339001702' rel='publisher'/>
<!--[if IE]> <script> (function() { var html5 = ("abbr,article,aside,audio,canvas,datalist,details," + "figure,footer,header,hgroup,mark,menu,meter,nav,output," + "progress,section,time,video").split(','); for (var i = 0; i < html5.length; i++) { document.createElement(html5[i]); } try { document.execCommand('BackgroundImageCache', false, true); } catch(e) {} })(); </script> <![endif]-->
<meta content='index, follow' name='robots'/>
<meta content='UieKsMr64OhWVnrx+TqFW0ZEKaA8y/QPQUKodWF6854=' name='verify-v1'/>
<title>The BalusC Code: FileServlet supporting resume and caching and GZIP</title>
<script src='http://www.google.com/jsapi'></script>
<link type='text/css' rel='stylesheet' href='https://www.blogger.com/static/v1/widgets/2435745617-widget_css_bundle.css' />
<link type='text/css' rel='stylesheet' href='https://www.blogger.com/dyn-css/authorization.css?targetBlogID=5396570633771229267&zx=8b7c7d68-0694-4df9-865a-089f3742b607' />
<style id='page-skin-1' type='text/css'><!--
/** *************************************************************************
* Blogger Template Style
* Name . . . : The BalusC Code
* URL. . . . : http://balusc.blogspot.com
* Based on . : Denim style
* *************************************************************************
* Author . . : BalusC
* Version. . : 1.1.0 20100605 (changed font from verdana to lucida sans)
* License. . : Open Source. No Warranty. No Support.
*/
/****************************************************************************/
/* Basic                                                                    */
/****************************************************************************/
html {
overflow: -moz-scrollbars-vertical;
}
body {
background: #ccc;
margin: 5px;
padding: 0px;
font-family: 'lucida sans unicode', tahoma, arial, helvetica, sans-serif;
font-size: .75em;
text-align: center;
color: #000;
}
#navbar {
display: none;
}
.clear {
clear: both;
}
/****************************************************************************/
/* Header                                                                   */
/****************************************************************************/
#header-wrapper {
margin-bottom: 5px;
padding: 0px;
text-align: left;
}
#header {
width: 1004px;
height: 50px;
margin: 0px auto;
padding: 0px;
color: #fff;
background-color: #c30;
border: 1px solid #900;
}
h1.title {
color: #fff;
margin: 0px 10px;
padding: 5px 0px;
line-height: 1em;
font-size: 1.7em;
font-weight: bold;
letter-spacing: 2px;
}
h1.title a:link, h1.title a:visited, h1.title a:hover, h1.title a:active {
color: #fff;
text-decoration: none;
}
#header .description {
display: block;
margin: 0px 10px;
padding: 5px 1px;
line-height: 1em;
font-size: .85em;
letter-spacing: 1px;
}
/****************************************************************************/
/* Content                                                                  */
/****************************************************************************/
#content-wrapper {
width: 1004px;
margin: 0px auto;
padding: 0px;
text-align: left;
background-color: #fff;
border: 1px solid #900;
}
#main-wrapper {
padding: 5px;
width: 734px;
float: left;
display: inline;       /* fix for doubling margin in IE */
word-wrap: break-word; /* fix for long text breaking sidebar float in IE */
overflow: hidden;      /* fix for long non-text content breaking IE sidebar float */
}
#AdSense1, #AdSense2 {
padding: 5px 0px;
}
h4 {
margin: 11px 0px 0px 0px;
padding: 0px;
line-height: 23px;
font-size: 1.3em;
font-weight: bold;
color: #900;
}
h4 a:link, h4 a:visited, h4 a:hover, h4 a:active {
text-decoration: none;
color: #900;
}
h4 a:hover, h4 a:active {
text-decoration: underline;
}
h5 {
margin: 0px;
padding: 3px;
font-size: .85em;
font-weight: normal;
color: #999;
}
h5 a:link, h5 a:visited, h5 a:hover, h5 a:active {
text-decoration: none;
color: #666;
}
h5 a:hover, h5 a:active {
text-decoration: underline;
}
p, li {
margin: 0px;
padding: 3px 0px;
text-align: justify;
line-height: 1.3em;
}
p.note {
border-top: #ccc 1px solid;
margin: 11px 0px 0px 0px;
font-size: .85em;
}
p.update {
color: #999;
font-size: .85em;
text-align: right;
}
#main-wrapper img {
margin: 0px;
padding: 0px;
border: 0px;
}
#main-wrapper img.thumbnail {
margin: 5px 0px 0px 0px;
padding: 1px;
border: 1px #999 solid;
}
div#fastmenu {
margin-bottom: 20px;
font-size: .85em;
}
div#fastmenu select {
background-color: #eee;
border: 1px #bbb solid;
margin: 0px 1px;
font-family: verdana, geneva, arial, helvetica, sans-serif;
font-size: .85em;
}
small.readmore {
text-decoration: underline;
font-weight: bold;
color: #333;
cursor: pointer;
}
hr {
height: 1px;
border: 0;
background: #ccc;
}
/****************************************************************************/
/* Sidebar                                                                  */
/****************************************************************************/
#sidebar-wrapper {
width: 260px;
float: right;
display: inline;       /* fix for doubling margin in IE */
word-wrap: break-word; /* fix for long text breaking sidebar float in IE */
overflow: hidden;      /* fix for long non-text content breaking IE sidebar float */
}
.sidebar {
margin-right: 5px;
color: #333;
line-height: 1em;
}
.sidebar h2 {
margin: 0px;
padding: 3px;
line-height: 1em;
background-color: #c30;
border-bottom: 1px #900 solid;
font-size: .95em;
text-transform: uppercase;
color: #fff;
}
.sidebar ul {
margin: 0px;
padding: 0px;
list-style: none;
}
.sidebar li {
margin: 0px;
padding: 2px 0px;
text-indent: 0px;
text-align: left;
line-height: 1em;
}
.sidebar .widget {
background-color: #fff;
border: 1px #900 solid;
margin-top: 5px;
}
.sidebar .widget-content {
margin: 5px;
}
#ArchiveList .toggle {
text-decoration:none !important;
}
#ArchiveList .toggle .zippy:after {
content: "" !important;
}
/****************************************************************************/
/* ZEEF blocks                                                              */
/****************************************************************************/
iframe.zeef {
width: 253px;
margin:-5px;
padding:0;
overflow:hidden;
}
iframe.zeef .action {
display:none;
}
/****************************************************************************/
/* AdSense blocks                                                           */
/****************************************************************************/
#AdSense1,#AdSense2{
overflow:hidden;
}
/****************************************************************************/
/* Profile                                                                  */
/****************************************************************************/
.profile-img {
float: left;
margin: 4px 4px 4px 0px;
padding: 1px;
border: 1px solid #666;
}
.profile-data {
margin: 0;
text-transform:uppercase;
letter-spacing:.1em;
font-weight: bold;
line-height: 1.5em;
font-size: .85em;
}
.profile-datablock {
margin: 0;
}
.profile-textblock {
margin: 5px 0;
line-height: 1.5em;
font-size: .85em;
text-align: justify;
}
.profile-link {
font-size: .85em;
}
/****************************************************************************/
/* Footer                                                                   */
/****************************************************************************/
#footer {
clear: both;
text-align: center;
color: #333;
}
#footer .widget {
margin: 0px;
padding-top: 0px;
font-size: .85em;
line-height: 1em;
text-align: left;
}
/****************************************************************************/
/* Links                                                                    */
/****************************************************************************/
a:link, a:hover, a:visited, a:active {
color: #00f;
text-decoration: underline;
}
a:hover {
color: #69f;
}
#main-wrapper a:hover img.thumbnail {
border-color: #900;
}
a.black:link, a.black:visited, a.black:hover, a.black:active {
color: #000;
text-decoration: none;
cursor: default;
}
a.none:link, a.none:visited, a.none:hover, a.none:active {
color: #000;
text-decoration: none;
}
a.none:hover {
color: #666;
}
a img {
border: 0px;
}
/****************************************************************************/
/* Tables                                                                   */
/****************************************************************************/
table {
position: relative;
margin-top: 3px;
border-collapse: collapse;
font-size: .85em;
}
th {
height: 14px;
border: 1px #fff solid;
color: #fff;
background-color: #b44;
font-weight: bold;
text-align: center;
white-space: nowrap;
}
td, tr {
padding: 1px;
}
td {
border: 1px #fff solid;
}
tr.tr1 {background-color: #e5e5e5;}
tr.tr2 {background-color: #c3c3c3;}
td.td0 {white-space: nowrap; padding: 0px;}
td.td1 {white-space: nowrap;}
td.td2 {white-space: nowrap; text-align: center;}
td.td3 {white-space: nowrap; text-align: right;}
td.td4 {white-space: nowrap; vertical-align: top;}
td.td5 {white-space: nowrap; text-align: right; vertical-align: top;}
td.td6 {vertical-align: top;}
td.td7 {vertical-align: top; border: 1px #ddd solid;}
td.td8 {vertical-align: top; border: 1px #bbb solid;}
td.td9 {text-align: center;}
/****************************************************************************/
/* Code                                                                     */
/****************************************************************************/
pre {
margin: 2px 0px 6px 0px;
padding: 2px;
border: 1px #333 dashed;
color: #000;
background: #ffe;
overflow: auto;
overflow-y: hidden;
font-family: 'lucida console', fixed, monospace, terminal, couriernew, courier;
font-size: 1em;
line-height: 1em;
word-wrap: normal;
}
code, .code, .codetag, .codetagscript, .codekeyword, .codevalue, .codeproperty, .codeconstant, .codeannotation, .codecomment1, .codecomment2, .codecomment3, .codeoutput, .codeoutputerror, .codeerror, .codeconsole, .codecursor, tt {
font-family: 'lucida console', fixed, monospace, terminal, couriernew, courier;
font-size: 1em;
line-height: 1em;
text-align: left;
}
code a { text-decoration: none; }
code, .code, tt  {color: #333;}
.codetag         {color: #366;}
.codetagscript   {color: #900;}
.codekeyword     {color: #906;}
.codevalue       {color: #00c;}
.codeproperty    {color: #009;}
.codestatic      {font-style: italic;}
.codeconstant    {color: #009; font-style: italic;}
.codeannotation  {color: #999;}
.codecomment1    {color: #396;}
.codecomment2    {color: #36c;}
.codecomment2 b  {color: #69c; font-weight: normal;}
.codecomment3    {color: #36c; font-style: italic;}
.codeoutput      {color: #00f;}
.codeoutputerror {color: #f00;}
.codeerror       {border-bottom: 1px #f00 solid;}
.codeconsole     {display: block; padding: 2px; color: #0f0; background-color: #000; border: 2px #ccc solid;}
.codecursor      {color: #ccc; text-decoration: blink;}
blockquote.error { border: 1px solid #900; color: #900; font-weight: bold; background-color: #f9f9f9; margin: 10px 0; padding: 8px; }
/****************************************************************************/
/* Stackoverflow copies                                                     */
/****************************************************************************/
.post-text a, .post-text a code { text-decoration: none; color: #0077CC; }
.post-text a:hover { text-decoration: underline; }
.post-text a:visited, .post-text a:visited code { color: #4A6B82; }
.post-text p { text-align: left; }
.post-text li { text-align: left; padding: 1px 0; }
.post-text code {
font-family: 'lucida console', fixed, monospace, terminal, couriernew, courier;
padding: 2px; background: #eee; }
.post-text pre code {background: none; padding: 0;}
.post-text pre code .kwd {color: #906;}
.post-text pre code .str {color: #00c;}
.post-text pre code .com {color: #396;}
.post-text pre code .tag {color: #366;}
.post-text pre code .atv {color: #366;}
.post-text blockquote { background: #ddd; padding: 5px; }
/****************************************************************************/
/* Posts                                                                    */
/****************************************************************************/
.date-header {
margin: 1.5em 0 0;
font-weight: normal;
color: #999;
font-size: 100%;
}
.post {
margin: 0 0 1.5em;
padding-bottom: 1.5em;
}
.post-title, .post-title a:link, .post-title a:visited, .post-title a:hover, .post-title a:active {
padding: 0px 0px 2px 0px;
font-size: 1.3em;
font-weight: bold;
color: #000;
text-decoration: none;
}
.post div {
margin: 0 0 .75em;
line-height: 1.3em;
}
p.post-footer {
margin: -.25em 0 0;
color: #fff;
font-size: 83%;
}
.post-footer .span {
margin-right: .3em;
}
.comment-link {
margin-left: .3em;
}
.post img {
padding: 4px;
border: 1px solid #666;
}
.post blockquote {
margin: 1em 20px;
}
.post blockquote p {
margin: .75em 0;
}
/****************************************************************************/
/* Comments                                                                 */
/****************************************************************************/
#comments h4 {
color: #666;
}
#comments-block {
margin: 10px 0px;
line-height: 1.3em;
}
#comments-block p {
text-align: left;
}
#comments-block dt.comment-author {
display: block;
margin: 5px 0px 0px 0px;
padding: 3px 3px 3px 18px;
border: 1px #999 solid;
background-color: #ccc;
}
#comments-block dt a:link, #comments-block dt a:visited, #comments-block dt a:hover, #comments-block dt a:active {
color: #333;
font-weight: bold;
text-decoration: none;
}
#comments-block dt a:hover {
color: #666;
}
#comments-block dd {
margin: 0px;
padding: 3px;
border: 1px #999 solid;
border-width: 0px 1px;
background-color: #eee;
}
#comments-block dd.comment-footer {
margin: 0px;
padding: 3px;
border: 1px #999 solid;
background-color: #ddd;
font-size: .85em;
}
#comments-block dd p, #comments-block dd span {
padding: 3px;
}
#comments-block dd.comment-footer a:link, #comments-block dd.comment-footer a:visited, #comments-block dd.comment-footer a:hover, #comments-block dd.comment-footer a:active {
color: #666;
text-decoration: none;
}
#comments-block dd.comment-footer a:hover {
color: #999;
}
.deleted-comment {
font-style:italic;
color:gray;
}
/****************************************************************************/
/* Blog links                                                               */
/****************************************************************************/
.feed-links {
clear: both;
line-height: 2.5em;
}
#blog-pager-newer-link {
float: left;
}
#blog-pager-older-link {
float: right;
}
#blog-pager {
text-align: center;
}
/****************************************************************************/
/* Blog labels                                                              */
/****************************************************************************/
#labelCloud {text-align:center;font-family:arial,sans-serif;}
#labelCloud .label-cloud li{display:inline;background-image:none !important;padding:0 5px;margin:0;vertical-align:baseline !important;border:0 !important;}
#labelCloud ul{list-style-type:none;margin:0 auto;padding:0;}
#labelCloud a img{border:0;display:inline;margin:0 0 0 3px;padding:0}
#labelCloud a{text-decoration:none}
#labelCloud a:hover{text-decoration:underline}
#labelCloud li a{}
#labelCloud .label-cloud {}
#labelCloud .label-count {padding-left:0.2em;font-size:1em;color:#000}
#labelCloud .label-cloud li:before{content:&quot;&quot; !important}

--></style>
<script type="text/javascript">var a="indexOf",b="&m=1",e="(^|&)m=",f="?",g="?m=1";function h(){var c=window.location.href,d=c.split(f);switch(d.length){case 1:return c+g;case 2:return 0<=d[1].search(e)?null:c+b;default:return null}}var k=navigator.userAgent;if(-1!=k[a]("Mobile")&&-1!=k[a]("WebKit")&&-1==k[a]("iPad")||-1!=k[a]("Opera Mini")||-1!=k[a]("IEMobile")){var l=h();l&&window.location.replace(l)};
</script><script type="text/javascript">
if (window.jstiming) window.jstiming.load.tick('headEnd');
</script></head>
<body>
<div class='navbar section' id='navbar'><div class='widget Navbar' id='Navbar1'><script type="text/javascript">
    function setAttributeOnload(object, attribute, val) {
      if(window.addEventListener) {
        window.addEventListener('load',
          function(){ object[attribute] = val; }, false);
      } else {
        window.attachEvent('onload', function(){ object[attribute] = val; });
      }
    }
  </script>
<div id="navbar-iframe-container"></div>
<script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
<script type="text/javascript">
        gapi.load("gapi.iframes:gapi.iframes.style.bubble", function() {
          if (gapi.iframes && gapi.iframes.getContext) {
            gapi.iframes.getContext().openChild({
                url: 'https://www.blogger.com/navbar.g?targetBlogID\0755396570633771229267\46blogName\75The+BalusC+Code\46publishMode\75PUBLISH_MODE_BLOGSPOT\46navbarType\75BLUE\46layoutType\75LAYOUTS\46searchRoot\75http://balusc.blogspot.com/search\46blogLocale\75en\46v\0752\46homepageUrl\75http://balusc.blogspot.com/\46targetPostID\0755771569684313566405\46blogPostOrPageUrl\75http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html\46blogFollowUrl\75https://plus.google.com/113917986381339001702\46vt\75-5132035367687204960',
                where: document.getElementById("navbar-iframe-container"),
                id: "navbar-iframe"
            });
          }
        });
      </script><script type="text/javascript">
(function() {
var script = document.createElement('script');
script.type = 'text/javascript';
script.src = '//pagead2.googlesyndication.com/pagead/js/google_top_exp.js';
var head = document.getElementsByTagName('head')[0];
if (head) {
head.appendChild(script);
}})();
</script>
</div></div>
<div><a name='top'></a></div>
<div id='outer-wrapper'>
<div id='wrap2'>
<!-- skip links for text browsers -->
<span id='skiplinks' style='display:none;'>
<a href='#main'>skip to main </a> | <a href='#sidebar'>skip to sidebar</a>
</span>
<div id='header-wrapper'>
<div class='header section' id='header'><div class='widget Header' id='Header1'>
<div id='header-inner'>
<div class='titlewrapper'>
<h1 class='title'>
<a href='http://balusc.blogspot.com/'>The BalusC Code</a>
</h1>
</div>
<div class='descriptionwrapper'>
<p class='description'><span>Code depot of a Java EE developer</span></p>
</div>
</div>
</div></div>
</div>
<div id='content-wrapper'>
<div id='crosscol-wrapper' style='text-align:center'>
<div class='crosscol section' id='crosscol'></div>
</div>
<div id='main-wrapper'>
<div class='main section' id='main'><div class='widget HTML' id='HTML2'>
<div class='widget-content'>
<script>function startHide(page) {
	if (!requestURIContains(page)) {
		document.write('<p><small class="readmore" onclick="window.location.href=\'' + page + '\';">Click here to read the entire article ..</small></p><div style="display: none;">');
		var divs = document.getElementsByTagName('div');
		for (var i = 0; i < divs.length; i++) {
			if (divs[i].id == 'fastmenu') {
				divs[i].style.display = 'none';
			}
		}
	}
}
function endHide(page) {
	if (!requestURIContains(page)) {
		document.write('</div>');
	}
}
function requestURIContains(part) {
	return window.location.href.toLowerCase().indexOf(part) > -1;
}</script>
</div>
<div class='clear'></div>
<span class='widget-item-control'>
<span class='item-control blog-admin'>
<a class='quickedit' href='//www.blogger.com/rearrange?blogID=5396570633771229267&widgetType=HTML&widgetId=HTML2&action=editWidget&sectionId=main' onclick='return _WidgetManager._PopupConfig(document.getElementById("HTML2"));' target='configHTML2' title='Edit'>
<img alt='' height='18' src='http://img1.blogblog.com/img/icon18_wrench_allbkg.png' width='18'/>
</a>
</span>
</span>
<div class='clear'></div>
</div><div class='widget Blog' id='Blog1'>
<div class='blog-posts hfeed'>
<!-- google_ad_section_start(name=default) -->

          <div class="date-outer">
        
<h2 class='date-header'><span>Wednesday, February 18, 2009</span></h2>

          <div class="date-posts">
        
<div class='post-outer'>
<div class='post hentry'>
<a name='5771569684313566405'></a>
<h3 class='post-title entry-title'>
FileServlet supporting resume and caching and GZIP
</h3>
<div class='post-header'>
<div class='post-header-line-1'></div>
</div>
<div class='post-body entry-content'>
<div id="fastmenu">
 <select onchange="document.location.href = this.options[this.selectedIndex].value">
  <option value="">Fast menu</option>
  <option value="#Introduction">Introduction</option>
  <option value="#ResumeDownloads">Resume downloads</option>
  <option value="#ClientSideCaching">Client side caching</option>
  <option value="#GZIPCompression">GZIP compression</option>
  <option value="#TheCode">The Code</option>
 </select>
</div>

<h4><a name="Introduction" href="#Introduction">Introduction</a></h4>

<p>In the almost 2 year old <a href="http://balusc.blogspot.com/2007/07/fileservlet.html">FileServlet</a> and <a href="http://balusc.blogspot.com/2007/04/imageservlet.html">ImageServlet</a> articles you can find basic examples of a download servlet and an image servlet. It does in fact nothing more than obtaining an InputStream of the desired resource/file and writing it to the OutputStream of the HTTP response along with a set of important response headers. It does not support resumes and effective caching of client side data.</p>

<p>If one downloaded a big file and got network problems on 99% of the file, one wouldn't be happy to discover the need to download the complete file <i>again</i> after getting network back. If a browser decides to check the cached images for changes, it would send a <span class="code">HEAD</span> request to determine under each the unique file identifier and its timestamp or it would send a conditional <span class="code">GET</span> request to determine the response status. If the image isn't changed according to the server response, the client won't re-request the image again to save the network bandwidth and other efforts.</p>

<p>You could leverage the task to a default servlet of the webcontainer/appserver you're using, but most of them doesn't implement all of the performance enhancements, so does for example Tomcat's <a href="http://tomcat.apache.org/tomcat-6.0-doc/default-servlet.html">DefaultServlet</a> <i>not</i> support the <span class="code">Expires</span> header.</p>

<script>startHide('/2009/02/fileservlet-supporting-resume-and.html');</script>

<h5><a href="#top">Back to top</a></h5>

<h4><a name="ResumeDownloads" href="#ResumeDownloads">Resume downloads</a></h4>

<p>To enable download resumes, the server have to send at least the <span class="code"><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.5" target="_blank">Accept-Ranges</a></span>, <span class="code"><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.19" target="_blank">ETag</a></span> and <span class="code"><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.29" target="_blank">Last-Modified</a></span> response headers to the client along with the file.</p>

<p>The <span class="code">Accept-Ranges</span> response header with the value <span class="code">"bytes"</span> informs the client that the server supports byte-range requests. With this the client could request for a specific byte range using the <span class="code"><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35" target="_blank">Range</a></span> request header.<p>

<p>The <span class="code">ETag</span> response header should contain a value which represents an unique identifier of the file in question so that both the server and the client can identify the file. You can use a combination of the file name, file size and file modification timestap for this. Some servers hauls this combination through a MD5 function to get an unique 32 character hexadecimal string. But this is not necessarily unique because two different strings could generate the same MD5 hash, so we won't use it here. The client could resend the obtained <span class="code">ETag</span> back to the server for validation using the <span class="code"><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.24" target="_blank">If-Match</a></span> or <span class="code"><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.27" target="_blank">If-Range</a></span> request headers.<p>

<p>The <span class="code">Last-Modified</span> response header should contain a date which represents the last modification timestamp of the file as it is at the server side. The client could resend the obtained timestamp back to the server for validation using the <span class="code"><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.28" target="_blank">If-Unmodified-Since</a></span> or <span class="code"><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.27" target="_blank">If-Range</a></span> request headers. <b>Important note:</b> keep in mind that the timestamp accuracy in server side Java is in milliseconds while the accurancy of the <span class="code">Last-Modified</span> header is in seconds. In Java code you should add 1 second (1000ms) to the value of the <span class="code">If-*</span> request headers to bridge this difference before validation.<p>

<p>Whenever the client sends a partial <span class="code">GET</span> request with a <span class="code">Range</span> request header to the server, then server should intercept on the conditional <span class="code">GET</span> request headers (all headers starting with <span class="code">If</span>) and handle accordingly. Whenever the <span class="code">If-Match</span> or <span class="code">If-Unmodified-Since</span> conditions are negative, the server should send a <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.13" target="_blank">412 "Precondition Failed"</a> response back without any content. Whenever the <span class="code">If-Range</span> condition is negative, then the server should ignore the <span class="code">Range</span> header and send the full file back. Whenever the <span class="code">Range</span> header is in invalid format, then the server should send a <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.17" target="_blank">416 "Requested Range Not Satisfiable"</a> response back without any content.</p>

<p>If a partial <span class="code">GET</span> request with a valid <span class="code">Range</span> header is sent by the client, then the server should send the specific byte range(s) back as a <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.7" target="_blank">206 "Partial Content"</a> response.</p>

<h5><a href="#top">Back to top</a></h5>

<h4><a name="ClientSideCaching" href="#ClientSideCaching">Client side caching</a></h4>

<p>The principle is the same as with resume downloads, with the only difference that no <span class="code">Range</span> request header is been sent to the server. The server only have to check and validate any conditional <span class="code">GET</span> request headers and respond accordingly. Usually those are the <span class="code"><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.26" target="_blank">If-None-Match</a></span> or <span class="code"><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.25" target="_blank">If-Modified-Since</a></span> request headers. The client could also send a <span class="code">HEAD</span> request (for which the server should respond exactly like a <span class="code">GET</span>, but completely without content) and determine the obtained <span class="code">ETag</span> and <span class="code">Last-Modified</span> response headers itself.</p>

<p>Whenever the <span class="code">If-None-Match</span> or <span class="code">If-Modified-Since</span> conditions are positive, the server should send a <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.5" target="_blank">304 "Not Modified"</a> response back without any content. If this happens, then the client is allowed to use the content which is already available in the client side cache.</p>

<p>Further on you can use the <span class="code"><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.21" target="_blank">Expires</a></span> response header to inform the client how long to keep the content in the client side cache without firing any request about that, even no <span class="code">HEAD</span> requests.</p>

<h5><a href="#top">Back to top</a></h5>

<h4><a name="GZIPCompression" href="#GZIPCompression">GZIP compression</a></h4>

<p>To save more network bandwitch, we could compress text files (text/javascript, text/css, text/xml, text/csv, etcetera) with GZIP. Generally you can save up to 70% of network bandwidth by compressing text files with GZIP. We only need to check if the client accepts GZIP encoding by checking if the <span class="code"><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.3" target="_blank">Accept-Encoding</a></span> header contains <span class="codevalue">"gzip"</span>. If this is true, and the client is requesting the full file, then the full text file will be compressed. Statistics learn that about 90% of the browsers supports GZIP.</p>

<p>This may also be possible for all files other than text, but as it usually concerns images and another kinds of (large) binary files, it may unnecessarily generate too much overhead to (de)compress them.</p>

<h5><a href="#top">Back to top</a></h5>

<h4><a name="TheCode" href="#TheCode">The Code</a></h4>

<p>OK, enough boring technical background blah, now on to the code!</p>
<p>This fileservlet does everything what it should do based on the request headers as described above. It also supports multipart byte requests (the client could send multiple ranges commaseparated along with the <span class="code">Range</span> header). The whole stuff is targeted on at least Java EE 5 and developed and tested in Eclipse 3.4 with Tomcat 6. It is tested with different webbrowsers (FireFox2/3, IE6/7/8, Opera8/9, Safari2/3 and Chrome) and also with a plain vanilla Java Application using URLConnection.</p>
<p>You can use it for any file types: binary files, text files, images, etcetera. When the requested file is a text file or an image or when its content type is covered by the <span class="code"><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.1" target="_blank">Accept</a></span> request header of the client, then it will be displayed <span class="code">inline</span>, otherwise it will be sent as an <span class="code">attachment</span> which will pop up a 'save as' dialogue.</p>

<p>It's almost 485 lines of code of which the nearly half are less or more rudimentary due to comments (read them all though), long-code line breaks and blank lines. You can just copy'n'paste and run it. You're free to make changes whenever needed as long as it's not for commercial use.</p>

<pre><span class="codecomment1">/*
 * net/balusc/webapp/FileServlet.java
 *
 * Copyright (C) 2009 BalusC
 *
 * This program is free software: you can redistribute it and/or modify it under the terms of the
 * GNU Lesser General Public License as published by the Free Software Foundation, either version 3
 * of the License, or (at your option) any later version.
 * 
 * This library is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without
 * even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 * 
 * You should have received a copy of the GNU Lesser General Public License along with this library.
 * If not, see &lt;http://www.gnu.org/licenses/&gt;.
 */</span>

<span class="codekeyword">package</span> net.balusc.webapp;

<span class="codekeyword">import</span> java.io.Closeable;
<span class="codekeyword">import</span> java.io.File;
<span class="codekeyword">import</span> java.io.IOException;
<span class="codekeyword">import</span> java.io.OutputStream;
<span class="codekeyword">import</span> java.io.RandomAccessFile;
<span class="codekeyword">import</span> java.net.URLDecoder;
<span class="codekeyword">import</span> java.util.ArrayList;
<span class="codekeyword">import</span> java.util.Arrays;
<span class="codekeyword">import</span> java.util.List;
<span class="codekeyword">import</span> java.util.zip.GZIPOutputStream;

<span class="codekeyword">import</span> javax.servlet.ServletException;
<span class="codekeyword">import</span> javax.servlet.ServletOutputStream;
<span class="codekeyword">import</span> javax.servlet.http.HttpServlet;
<span class="codekeyword">import</span> javax.servlet.http.HttpServletRequest;
<span class="codekeyword">import</span> javax.servlet.http.HttpServletResponse;

<span class="codecomment2">/**
 * A file servlet supporting resume of downloads and client-side caching and GZIP of text content.
 * This servlet can also be used for images, client-side caching would become more efficient.
 * This servlet can also be used for text files, GZIP would decrease network bandwidth.
 *
 * <b>@author</b> BalusC
 * <b>@link</b> http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html
 */</span>
<span class="codekeyword">public</span> <span class="codekeyword">class</span> FileServlet <span class="codekeyword">extends</span> HttpServlet {

    <span class="codecomment1">// Constants ----------------------------------------------------------------------------------</span>

    <span class="codekeyword">private</span> <span class="codekeyword">static</span> <span class="codekeyword">final</span> <span class="codekeyword">int</span> <span class="codeconstant">DEFAULT_BUFFER_SIZE</span> = 10240; <span class="codecomment1">// ..bytes = 10KB.</span>
    <span class="codekeyword">private</span> <span class="codekeyword">static</span> <span class="codekeyword">final</span> <span class="codekeyword">long</span> <span class="codeconstant">DEFAULT_EXPIRE_TIME</span> = 604800000L; <span class="codecomment1">// ..ms = 1 week.</span>
    <span class="codekeyword">private</span> <span class="codekeyword">static</span> <span class="codekeyword">final</span> String <span class="codeconstant">MULTIPART_BOUNDARY</span> = <span class="codevalue">"MULTIPART_BYTERANGES"</span>;

    <span class="codecomment1">// Properties ---------------------------------------------------------------------------------</span>

    <span class="codekeyword">private</span> String <span class="codeproperty">basePath</span>;

    <span class="codecomment1">// Actions ------------------------------------------------------------------------------------</span>

    <span class="codecomment2">/**
     * Initialize the servlet.
     * @see HttpServlet#init().
     */</span>
    <span class="codekeyword">public</span> <span class="codekeyword">void</span> init() <span class="codekeyword">throws</span> ServletException {

        <span class="codecomment1">// Get base path (path to get all resources from) as init parameter.</span>
        <span class="codekeyword">this</span>.<span class="codeproperty">basePath</span> = getServletContext().getRealPath(getInitParameter(<span class="codevalue">"basePath"</span>));

        <span class="codecomment1">// Validate base path.</span>
        <span class="codekeyword">if</span> (<span class="codekeyword">this</span>.<span class="codeproperty">basePath</span> == <span class="codekeyword">null</span>) {
            <span class="codekeyword">throw</span> <span class="codekeyword">new</span> ServletException(<span class="codevalue">"FileServlet init param 'basePath' is required."</span>);
        } <span class="codekeyword">else</span> {
            File path = <span class="codekeyword">new</span> File(<span class="codekeyword">this</span>.<span class="codeproperty">basePath</span>);
            <span class="codekeyword">if</span> (!path.exists()) {
                <span class="codekeyword">throw</span> <span class="codekeyword">new</span> ServletException(<span class="codevalue">"FileServlet init param 'basePath' value '"</span>
                    + <span class="codekeyword">this</span>.<span class="codeproperty">basePath</span> + <span class="codevalue">"' does actually not exist in file system."</span>);
            } <span class="codekeyword">else</span> <span class="codekeyword">if</span> (!path.isDirectory()) {
                <span class="codekeyword">throw</span> <span class="codekeyword">new</span> ServletException(<span class="codevalue">"FileServlet init param 'basePath' value '"</span>
                    + <span class="codekeyword">this</span>.<span class="codeproperty">basePath</span> + <span class="codevalue">"' is actually not a directory in file system."</span>);
            } <span class="codekeyword">else</span> <span class="codekeyword">if</span> (!path.canRead()) {
                <span class="codekeyword">throw</span> <span class="codekeyword">new</span> ServletException(<span class="codevalue">"FileServlet init param 'basePath' value '"</span>
                    + <span class="codekeyword">this</span>.<span class="codeproperty">basePath</span> + <span class="codevalue">"' is actually not readable in file system."</span>);
            }
        }
    }

    <span class="codecomment2">/**
     * Process HEAD request. This returns the same headers as GET request, but without content.
     * <b>@see</b> HttpServlet#doHead(HttpServletRequest, HttpServletResponse).
     */</span>
    <span class="codekeyword">protected</span> <span class="codekeyword">void</span> doHead(HttpServletRequest request, HttpServletResponse response)
        <span class="codekeyword">throws</span> ServletException, IOException
    {
        <span class="codecomment1">// Process request without content.</span>
        <a class="none" href="#processRequest">processRequest</a>(request, response, <span class="codekeyword">false</span>);
    }

    <span class="codecomment2">/**
     * Process GET request.
     * <b>@see</b> HttpServlet#doGet(HttpServletRequest, HttpServletResponse).
     */</span>
    <span class="codekeyword">protected</span> <span class="codekeyword">void</span> doGet(HttpServletRequest request, HttpServletResponse response)
        <span class="codekeyword">throws</span> ServletException, IOException
    {
        <span class="codecomment1">// Process request with content.</span>
        <a class="none" href="#processRequest">processRequest</a>(request, response, <span class="codekeyword">true</span>);
    }
<a name="processRequest"></a>
    <span class="codecomment2">/**
     * Process the actual request.
     * <b>@param</b> request The request to be processed.
     * <b>@param</b> response The response to be created.
     * <b>@param</b> content Whether the request body should be written (GET) or not (HEAD).
     * <b>@throws</b> IOException If something fails at I/O level.
     */</span>
    <span class="codekeyword">private</span> <span class="codekeyword">void</span> processRequest
        (HttpServletRequest request, HttpServletResponse response, <span class="codekeyword">boolean</span> content)
            <span class="codekeyword">throws</span> IOException
    {
        <span class="codecomment1">// Validate the requested file ------------------------------------------------------------</span>

        <span class="codecomment1">// Get requested file by path info.</span>
        String requestedFile = request.getPathInfo();

        <span class="codecomment1">// Check if file is actually supplied to the request URL.</span>
        <span class="codekeyword">if</span> (requestedFile == <span class="codekeyword">null</span>) {
            <span class="codecomment1">// Do your thing if the file is not supplied to the request URL.</span>
            <span class="codecomment1">// Throw an exception, or send 404, or show default/warning page, or just ignore it.</span>
            response.sendError(HttpServletResponse.<span class="codeconstant">SC_NOT_FOUND</span>);
            <span class="codekeyword">return</span>;
        }

        <span class="codecomment1">// URL-decode the file name (might contain spaces and on) and prepare file object.</span>
        File file = <span class="codekeyword">new</span> File(<span class="codeproperty">basePath</span>, URLDecoder.<span class="codestatic">decode</span>(requestedFile, <span class="codevalue">"UTF-8"</span>));

        <span class="codecomment1">// Check if file actually exists in filesystem.</span>
        <span class="codekeyword">if</span> (!file.exists()) {
            <span class="codecomment1">// Do your thing if the file appears to be non-existing.</span>
            <span class="codecomment1">// Throw an exception, or send 404, or show default/warning page, or just ignore it.</span>
            response.sendError(HttpServletResponse.<span class="codeconstant">SC_NOT_FOUND</span>);
            <span class="codekeyword">return</span>;
        }

        <span class="codecomment1">// Prepare some variables. The ETag is an unique identifier of the file.</span>
        String fileName = file.getName();
        <span class="codekeyword">long</span> length = file.length();
        <span class="codekeyword">long</span> lastModified = file.lastModified();
        String eTag = fileName + <span class="codevalue">"_"</span> + length + <span class="codevalue">"_"</span> + lastModified;
        <span class="codekeyword">long</span> expires = System.<span class="codestatic">currentTimeMillis</span>() + <span class="codeconstant">DEFAULT_EXPIRE_TIME</span>;


        <span class="codecomment1">// Validate request headers for caching ---------------------------------------------------</span>

        <span class="codecomment1">// If-None-Match header should contain "*" or ETag. If so, then return 304.</span>
        String ifNoneMatch = request.getHeader(<span class="codevalue">"If-None-Match"</span>);
        <span class="codekeyword">if</span> (ifNoneMatch != <span class="codekeyword">null</span> && <span class="codestatic"><a class="none" href="#matches">matches</a></span>(ifNoneMatch, eTag)) {
            response.setStatus(HttpServletResponse.<span class="codeconstant">SC_NOT_MODIFIED</span>);
            response.setHeader(<span class="codevalue">"ETag"</span>, eTag); <span class="codecomment1">// Required in 304.</span>
            response.setDateHeader(<span class="codevalue">"Expires"</span>, expires); <span class="codecomment1">// Postpone cache with 1 week.</span>
            <span class="codekeyword">return</span>;
        }

        <span class="codecomment1">// If-Modified-Since header should be greater than LastModified. If so, then return 304.</span>
        <span class="codecomment1">// This header is ignored if any If-None-Match header is specified.</span>
        <span class="codekeyword">long</span> ifModifiedSince = request.getDateHeader(<span class="codevalue">"If-Modified-Since"</span>);
        <span class="codekeyword">if</span> (ifNoneMatch == <span class="codekeyword">null</span> && ifModifiedSince != -1 && ifModifiedSince + 1000 &gt; lastModified) {
            response.setStatus(HttpServletResponse.<span class="codeconstant">SC_NOT_MODIFIED</span>);
            response.setHeader(<span class="codevalue">"ETag"</span>, eTag); <span class="codecomment1">// Required in 304.</span>
            response.setDateHeader(<span class="codevalue">"Expires"</span>, expires); <span class="codecomment1">// Postpone cache with 1 week.</span>
            <span class="codekeyword">return</span>;
        }


        <span class="codecomment1">// Validate request headers for resume ----------------------------------------------------</span>

        <span class="codecomment1">// If-Match header should contain "*" or ETag. If not, then return 412.</span>
        String ifMatch = request.getHeader(<span class="codevalue">"If-Match"</span>);
        <span class="codekeyword">if</span> (ifMatch != <span class="codekeyword">null</span> && !<span class="codestatic"><a class="none" href="#matches">matches</a></span>(ifMatch, eTag)) {
            response.sendError(HttpServletResponse.<span class="codeconstant">SC_PRECONDITION_FAILED</span>);
            <span class="codekeyword">return</span>;
        }

        <span class="codecomment1">// If-Unmodified-Since header should be greater than LastModified. If not, then return 412.</span>
        <span class="codekeyword">long</span> ifUnmodifiedSince = request.getDateHeader(<span class="codevalue">"If-Unmodified-Since"</span>);
        <span class="codekeyword">if</span> (ifUnmodifiedSince != -1 && ifUnmodifiedSince + 1000 &lt;= lastModified) {
            response.sendError(HttpServletResponse.<span class="codeconstant">SC_PRECONDITION_FAILED</span>);
            <span class="codekeyword">return</span>;
        }


        <span class="codecomment1">// Validate and process range -------------------------------------------------------------</span>

        <span class="codecomment1">// Prepare some variables. The full Range represents the complete file.</span>
        <a class="none" href="#Range">Range</a> full = <span class="codekeyword">new</span> <a class="none" href="#Range">Range</a>(0, length - 1, length);
        List&lt;<a class="none" href="#Range">Range</a>&gt; ranges = <span class="codekeyword">new</span> ArrayList&lt;<a class="none" href="#Range">Range</a>&gt;();

        <span class="codecomment1">// Validate and process Range and If-Range headers.</span>
        String range = request.getHeader(<span class="codevalue">"Range"</span>);
        <span class="codekeyword">if</span> (range != <span class="codekeyword">null</span>) {

            <span class="codecomment1">// Range header should match format "bytes=n-n,n-n,n-n...". If not, then return 416.</span>
            <span class="codekeyword">if</span> (!range.matches(<span class="codevalue">"^bytes=\\d*-\\d*(,\\d*-\\d*)*$"</span>)) {
                response.setHeader(<span class="codevalue">"Content-Range"</span>, <span class="codevalue">"bytes */"</span> + length); <span class="codecomment1">// Required in 416.</span>
                response.sendError(HttpServletResponse.<span class="codeconstant">SC_REQUESTED_RANGE_NOT_SATISFIABLE</span>);
                <span class="codekeyword">return</span>;
            }

            <span class="codecomment1">// If-Range header should either match ETag or be greater then LastModified. If not,</span>
            <span class="codecomment1">// then return full file.</span>
            String ifRange = request.getHeader(<span class="codevalue">"If-Range"</span>);
            <span class="codekeyword">if</span> (ifRange != <span class="codekeyword">null</span> && !ifRange.equals(eTag)) {
                <span class="codekeyword">try</span> {
                    <span class="codekeyword">long</span> ifRangeTime = request.getDateHeader(<span class="codevalue">"If-Range"</span>); <span class="codecomment1">// Throws IAE if invalid.</span>
                    <span class="codekeyword">if</span> (ifRangeTime != -1 && ifRangeTime + 1000 < lastModified) {
                        ranges.add(full);
                    }
                } <span class="codekeyword">catch</span> (IllegalArgumentException ignore) {
                    ranges.add(full);
                }
            }

            <span class="codecomment1">// If any valid If-Range header, then process each part of byte range.</span>
            <span class="codekeyword">if</span> (ranges.isEmpty()) {
                <span class="codekeyword">for</span> (String part : range.substring(6).split(<span class="codevalue">","</span>)) {
                    <span class="codecomment1">// Assuming a file with length of 100, the following examples returns bytes at:</span>
                    <span class="codecomment1">// 50-80 (50 to 80), 40- (40 to length=100), -20 (length-20=80 to length=100).</span>
                    <span class="codekeyword">long</span> start = <span class="codestatic"><a class="none" href="#sublong">sublong</a></span>(part, 0, part.indexOf(<span class="codevalue">"-"</span>));
                    <span class="codekeyword">long</span> end = <span class="codestatic"><a class="none" href="#sublong">sublong</a></span>(part, part.indexOf(<span class="codevalue">"-"</span>) + 1, part.length());

                    <span class="codekeyword">if</span> (start == -1) {
                        start = length - end;
                        end = length - 1;
                    } <span class="codekeyword">else</span> <span class="codekeyword">if</span> (end == -1 || end &gt; length - 1) {
                        end = length - 1;
                    }

                    <span class="codecomment1">// Check if Range is syntactically valid. If not, then return 416.</span>
                    <span class="codekeyword">if</span> (start &gt; end) {
                        response.setHeader(<span class="codevalue">"Content-Range"</span>, <span class="codevalue">"bytes */"</span> + length); <span class="codecomment1">// Required in 416.</span>
                        response.sendError(HttpServletResponse.<span class="codeconstant">SC_REQUESTED_RANGE_NOT_SATISFIABLE</span>);
                        <span class="codekeyword">return</span>;
                    }

                    <span class="codecomment1">// Add range.</span>
                    ranges.add(<span class="codekeyword">new</span> <a class="none" href="#Range">Range</a>(start, end, length));
                }
            }
        }


        <span class="codecomment1">// Prepare and initialize response --------------------------------------------------------</span>

        <span class="codecomment1">// Get content type by file name and set default GZIP support and content disposition.</span>
        String contentType = getServletContext().getMimeType(fileName);
        <span class="codekeyword">boolean</span> acceptsGzip = <span class="codekeyword">false</span>;
        String disposition = <span class="codevalue">"inline"</span>;

        <span class="codecomment1">// If content type is unknown, then set the default value.</span>
        <span class="codecomment1">// For all content types, see: http://www.w3schools.com/media/media_mimeref.asp</span>
        <span class="codecomment1">// To add new content types, add new mime-mapping entry in web.xml.</span>
        <span class="codekeyword">if</span> (contentType == <span class="codekeyword">null</span>) {
            contentType = <span class="codevalue">"application/octet-stream"</span>;
        }

        <span class="codecomment1">// If content type is text, then determine whether GZIP content encoding is supported by</span>
        <span class="codecomment1">// the browser and expand content type with the one and right character encoding.</span>
        <span class="codekeyword">if</span> (contentType.startsWith(<span class="codevalue">"text"</span>)) {
            String acceptEncoding = request.getHeader(<span class="codevalue">"Accept-Encoding"</span>);
            acceptsGzip = acceptEncoding != <span class="codekeyword">null</span> && accepts(acceptEncoding, <span class="codevalue">"gzip"</span>);
            contentType += <span class="codevalue">";charset=UTF-8"</span>;
        } 

        <span class="codecomment1">// Else, expect for images, determine content disposition. If content type is supported by</span>
        <span class="codecomment1">// the browser, then set to inline, else attachment which will pop a 'save as' dialogue.</span>
        <span class="codekeyword">else</span> <span class="codekeyword">if</span> (!contentType.startsWith(<span class="codevalue">"image"</span>)) {
            String accept = request.getHeader(<span class="codevalue">"Accept"</span>);
            disposition = accept != <span class="codekeyword">null</span> && accepts(accept, contentType) ? <span class="codevalue">"inline"</span> : <span class="codevalue">"attachment"</span>;
        }

        <span class="codecomment1">// Initialize response.</span>
        response.reset();
        response.setBufferSize(<span class="codeconstant">DEFAULT_BUFFER_SIZE</span>);
        response.setHeader(<span class="codevalue">"Content-Disposition"</span>, disposition + <span class="codevalue">";filename=\""</span> + fileName + <span class="codevalue">"\""</span>);
        response.setHeader(<span class="codevalue">"Accept-Ranges"</span>, <span class="codevalue">"bytes"</span>);
        response.setHeader(<span class="codevalue">"ETag"</span>, eTag);
        response.setDateHeader(<span class="codevalue">"Last-Modified"</span>, lastModified);
        response.setDateHeader(<span class="codevalue">"Expires"</span>, expires);


        <span class="codecomment1">// Send requested file (part(s)) to client ------------------------------------------------</span>

        <span class="codecomment1">// Prepare streams.</span>
        RandomAccessFile input = <span class="codekeyword">null</span>;
        OutputStream output = <span class="codekeyword">null</span>;

        <span class="codekeyword">try</span> {
            <span class="codecomment1">// Open streams.</span>
            input = <span class="codekeyword">new</span> RandomAccessFile(file, <span class="codevalue">"r"</span>);
            output = response.getOutputStream();

            <span class="codekeyword">if</span> (ranges.isEmpty() || ranges.get(0) == full) {

                <span class="codecomment1">// Return full file.</span>
                <a class="none" href="#Range">Range</a> r = full;
                response.setContentType(contentType);
                response.setHeader(<span class="codevalue">"Content-Range"</span>, <span class="codevalue">"bytes "</span> + r.<span class="codeproperty">start</span> + <span class="codevalue">"-"</span> + r.<span class="codeproperty">end</span> + <span class="codevalue">"/"</span> + r.<span class="codeproperty">total</span>);

                <span class="codekeyword">if</span> (content) {
                    <span class="codekeyword">if</span> (acceptsGzip) {
                        <span class="codecomment1">// The browser accepts GZIP, so GZIP the content.</span>
                        response.setHeader(<span class="codevalue">"Content-Encoding"</span>, <span class="codevalue">"gzip"</span>);
                        output = <span class="codekeyword">new</span> GZIPOutputStream(output, <span class="codeconstant">DEFAULT_BUFFER_SIZE</span>);
                    } <span class="codekeyword">else</span> {
                        <span class="codecomment1">// Content length is not directly predictable in case of GZIP.</span>
                        <span class="codecomment1">// So only add it if there is no means of GZIP, else browser will hang.</span>
                        response.setHeader(<span class="codevalue">"Content-Length"</span>, String.<span class="codestatic">valueOf</span>(r.<span class="codeproperty">length</span>));
                    }

                    <span class="codecomment1">// Copy full range.</span>
                    <span class="codestatic"><a class="none" href="#copy">copy</a></span>(input, output, r.<span class="codeproperty">start</span>, r.<span class="codeproperty">length</span>);
                }

            } <span class="codekeyword">else</span> <span class="codekeyword">if</span> (ranges.size() == 1) {

                <span class="codecomment1">// Return single part of file.</span>
                <a class="none" href="#Range">Range</a> r = ranges.get(0);
                response.setContentType(contentType);
                response.setHeader(<span class="codevalue">"Content-Range"</span>, <span class="codevalue">"bytes "</span> + r.<span class="codeproperty">start</span> + <span class="codevalue">"-"</span> + r.<span class="codeproperty">end</span> + <span class="codevalue">"/"</span> + r.<span class="codeproperty">total</span>);
                response.setHeader(<span class="codevalue">"Content-Length"</span>, String.<span class="codestatic">valueOf</span>(r.<span class="codeproperty">length</span>));
                response.setStatus(HttpServletResponse.<span class="codeconstant">SC_PARTIAL_CONTENT</span>); <span class="codecomment1">// 206.</span>

                <span class="codekeyword">if</span> (content) {
                    <span class="codecomment1">// Copy single part range.</span>
                    <span class="codestatic"><a class="none" href="#copy">copy</a></span>(input, output, r.<span class="codeproperty">start</span>, r.<span class="codeproperty">length</span>);
                }

            } <span class="codekeyword">else</span> {

                <span class="codecomment1">// Return multiple parts of file.</span>
                response.setContentType(<span class="codevalue">"multipart/byteranges; boundary="</span> + <span class="codeconstant">MULTIPART_BOUNDARY</span>);
                response.setStatus(HttpServletResponse.<span class="codeconstant">SC_PARTIAL_CONTENT</span>); <span class="codecomment1">// 206.</span>

                <span class="codekeyword">if</span> (content) {
                    <span class="codecomment1">// Cast back to ServletOutputStream to get the easy println methods.</span>
                    ServletOutputStream sos = (ServletOutputStream) output;

                    <span class="codecomment1">// Copy multi part range.</span>
                    <span class="codekeyword">for</span> (<a class="none" href="#Range">Range</a> r : ranges) {
                        <span class="codecomment1">// Add multipart boundary and header fields for every range.</span>
                        sos.println();
                        sos.println(<span class="codevalue">"--"</span> + <span class="codeconstant">MULTIPART_BOUNDARY</span>);
                        sos.println(<span class="codevalue">"Content-Type: "</span> + contentType);
                        sos.println(<span class="codevalue">"Content-Range: bytes "</span> + r.<span class="codeproperty">start</span> + <span class="codevalue">"-"</span> + r.<span class="codeproperty">end</span> + <span class="codevalue">"/"</span> + r.<span class="codeproperty">total</span>);

                        <span class="codecomment1">// Copy single part range of multi part range.</span>
                        <span class="codestatic"><a class="none" href="#copy">copy</a></span>(input, output, r.<span class="codeproperty">start</span>, r.<span class="codeproperty">length</span>);
                    }

                    <span class="codecomment1">// End with multipart boundary.</span>
                    sos.println();
                    sos.println(<span class="codevalue">"--"</span> + <span class="codeconstant">MULTIPART_BOUNDARY</span> + <span class="codevalue">"--"</span>);
                }
            }
        } <span class="codekeyword">finally</span> {
            <span class="codecomment1">// Gently close streams.</span>
            <span class="codestatic"><a class="none" href="#close">close</a></span>(output);
            <span class="codestatic"><a class="none" href="#close">close</a></span>(input);
        }
    }

    <span class="codecomment1">// Helpers (can be refactored to public utility class) ----------------------------------------</span>
<a name="accepts"></a>
    <span class="codecomment2">/**
     * Returns true if the given accept header accepts the given value.
     * <b>@param</b> acceptHeader The accept header.
     * <b>@param</b> toAccept The value to be accepted.
     * <b>@return</b> True if the given accept header accepts the given value.
     */</span>
    <span class="codekeyword">private</span> <span class="codekeyword">static</span> <span class="codekeyword">boolean</span> accepts(String acceptHeader, String toAccept) {
        String[] acceptValues = acceptHeader.split(<span class="codevalue">"\\s*(,|;)\\s*"</span>);
        Arrays.<span class="codestatic">sort</span>(acceptValues);
        <span class="codekeyword">return</span> Arrays.<span class="codestatic">binarySearch</span>(acceptValues, toAccept) > -1
            || Arrays.<span class="codestatic">binarySearch</span>(acceptValues, toAccept.replaceAll(<span class="codevalue">"/.*$"</span>, <span class="codevalue">"/*"</span>)) > -1
            || Arrays.<span class="codestatic">binarySearch</span>(acceptValues, <span class="codevalue">"*/*"</span>) > -1;
    }
<a name="matches"></a>
    <span class="codecomment2">/**
     * Returns true if the given match header matches the given value.
     * <b>@param</b> matchHeader The match header.
     * <b>@param</b> toMatch The value to be matched.
     * <b>@return</b> True if the given match header matches the given value.
     */</span>
    <span class="codekeyword">private</span> <span class="codekeyword">static</span> <span class="codekeyword">boolean</span> matches(String matchHeader, String toMatch) {
        String[] matchValues = matchHeader.split(<span class="codevalue">"\\s*,\\s*"</span>);
        Arrays.<span class="codestatic">sort</span>(matchValues);
        <span class="codekeyword">return</span> Arrays.<span class="codestatic">binarySearch</span>(matchValues, toMatch) > -1
            || Arrays.<span class="codestatic">binarySearch</span>(matchValues, <span class="codevalue">"*"</span>) > -1;
    }
<a name="sublong"></a>
    <span class="codecomment2">/**
     * Returns a substring of the given string value from the given begin index to the given end
     * index as a long. If the substring is empty, then -1 will be returned
     * <b>@param</b> value The string value to return a substring as long for.
     * <b>@param</b> beginIndex The begin index of the substring to be returned as long.
     * <b>@param</b> endIndex The end index of the substring to be returned as long.
     * <b>@return</b> A substring of the given string value as long or -1 if substring is empty.
     */</span>
    <span class="codekeyword">private</span> <span class="codekeyword">static</span> <span class="codekeyword">long</span> sublong(String value, <span class="codekeyword">int</span> beginIndex, <span class="codekeyword">int</span> endIndex) {
        String substring = value.substring(beginIndex, endIndex);
        <span class="codekeyword">return</span> (substring.length() &gt; 0) ? Long.<span class="codestatic">parseLong</span>(substring) : -1;
    }
<a name="copy"></a>
    <span class="codecomment2">/**
     * Copy the given byte range of the given input to the given output.
     * <b>@param</b> input The input to copy the given range to the given output for.
     * <b>@param</b> output The output to copy the given range from the given input for.
     * <b>@param</b> start Start of the byte range.
     * <b>@param</b> length Length of the byte range.
     * <b>@throws</b> IOException If something fails at I/O level.
     */</span>
    <span class="codekeyword">private</span> <span class="codekeyword">static</span> <span class="codekeyword">void</span> copy(RandomAccessFile input, OutputStream output, <span class="codekeyword">long</span> start, <span class="codekeyword">long</span> length)
        <span class="codekeyword">throws</span> IOException
    {
        <span class="codekeyword">byte</span>[] buffer = <span class="codekeyword">new</span> <span class="codekeyword">byte</span>[<span class="codeconstant">DEFAULT_BUFFER_SIZE</span>];
        <span class="codekeyword">int</span> read;

        <span class="codekeyword">if</span> (input.length() == length) {
            <span class="codecomment1">// Write full range.</span>
            <span class="codekeyword">while</span> ((read = input.read(buffer)) &gt; 0) {
                output.write(buffer, 0, read);
            }
        } <span class="codekeyword">else</span> {
            <span class="codecomment1">// Write partial range.</span>
            input.seek(start);
            <span class="codekeyword">long</span> toRead = length;

            <span class="codekeyword">while</span> ((read = input.read(buffer)) &gt; 0) {
                <span class="codekeyword">if</span> ((toRead -= read) &gt; 0) {
                    output.write(buffer, 0, read);
                } <span class="codekeyword">else</span> {
                    output.write(buffer, 0, (<span class="codekeyword">int</span>) toRead + read);
                    <span class="codekeyword">break</span>;
                }
            }
        }
    }
<a name="close"></a>
    <span class="codecomment2">/**
     * Close the given resource.
     * <b>@param</b> resource The resource to be closed.
     */</span>
    <span class="codekeyword">private</span> <span class="codekeyword">static</span> <span class="codekeyword">void</span> close(Closeable resource) {
        <span class="codekeyword">if</span> (resource != <span class="codekeyword">null</span>) {
            <span class="codekeyword">try</span> {
                resource.close();
            } <span class="codekeyword">catch</span> (IOException ignore) {
                <span class="codecomment1">// Ignore IOException. If you want to handle this anyway, it might be useful to know</span>
                <span class="codecomment1">// that this will generally only be thrown when the client aborted the request.</span>
            }
        }
    }

    <span class="codecomment1">// Inner classes ------------------------------------------------------------------------------</span>
<a name="Range"></a>
    <span class="codecomment2">/**
     * This class represents a byte range.
     */</span>
    <span class="codekeyword">protected</span> <span class="codekeyword">class</span> Range {
        <span class="codekeyword">long</span> <span class="codeproperty">start</span>;
        <span class="codekeyword">long</span> <span class="codeproperty">end</span>;
        <span class="codekeyword">long</span> <span class="codeproperty">length</span>;
        <span class="codekeyword">long</span> <span class="codeproperty">total</span>;

        <span class="codecomment2">/**
         * Construct a byte range.
         * <b>@param</b> start Start of the byte range.
         * <b>@param</b> end End of the byte range.
         * <b>@param</b> total Total length of the byte source.
         */</span>
        <span class="codekeyword">public</span> Range(<span class="codekeyword">long</span> start, <span class="codekeyword">long</span> end, <span class="codekeyword">long</span> total) {
            <span class="codekeyword">this</span>.<span class="codeproperty">start</span> = start;
            <span class="codekeyword">this</span>.<span class="codeproperty">end</span> = end;
            <span class="codekeyword">this</span>.<span class="codeproperty">length</span> = end - start + 1;
            <span class="codekeyword">this</span>.<span class="codeproperty">total</span> = total;
        }

    }

}</pre>

<p>In order to get the <span class="code">FileServlet</span> to work, add the following entries to the Web Deployment Descriptor <span class="code">web.xml</span>:</p>

<pre><span class="codetag">&lt;servlet&gt;</span>
    <span class="codetag">&lt;servlet-name&gt;</span>fileServlet<span class="codetag">&lt;/servlet-name&gt;</span>
    <span class="codetag">&lt;servlet-class&gt;</span>net.balusc.webapp.FileServlet<span class="codetag">&lt;/servlet-class&gt;</span>
    <span class="codetag">&lt;init-param&gt;</span>
        <span class="codetag">&lt;param-name&gt;</span>basePath<span class="codetag">&lt;/param-name&gt;</span>
        <span class="codetag">&lt;param-value&gt;</span>/WEB-INF/resources<span class="codetag">&lt;/param-value&gt;</span>
    <span class="codetag">&lt;/init-param&gt;</span>
<span class="codetag">&lt;/servlet&gt;</span>

<span class="codetag">&lt;servlet-mapping&gt;</span>
    <span class="codetag">&lt;servlet-name&gt;</span>fileServlet<span class="codetag">&lt;/servlet-name&gt;</span>
    <span class="codetag">&lt;url-pattern&gt;</span>/resources/*<span class="codetag">&lt;/url-pattern&gt;</span>
<span class="codetag">&lt;/servlet-mapping&gt;</span></pre>

<p>The <span class="code">basePath</span> value must be relative to the webcontent of your webapplication. You can of course change the value of the <span class="code">basePath</span> parameter and the url-pattern of the servlet-mapping to your taste.</p>

<p>Here are some basic use examples:</p>

<pre><span class="codecomment2">&lt;!-- XHTML or JSP --&gt;</span>
<span class="codetag">&lt;a</span> href=<span class="codevalue">"resources/files/foo.exe"</span><span class="codetag">&gt;</span>download foo.exe<span class="codetag">&lt;/a&gt;</span>
<span class="codetag">&lt;a</span> href=<span class="codevalue">"resources/files/bar.zip"</span><span class="codetag">&gt;</span>download bar.zip<span class="codetag">&lt;/a&gt;</span>

<span class="codetag">&lt;img</span> src=<span class="codevalue">"resources/images/pic.jpg"</span> <span class="codetag">/&gt;</span>
<span class="codetag">&lt;img</span> src=<span class="codevalue">"resources/images/logo.gif"</span> <span class="codetag">/&gt;</span>

<span class="codecomment2">&lt;!-- JSF --&gt;</span>
<span class="codetag">&lt;h:outputLink</span> value=<span class="codevalue">"resources/files/foo.exe"</span><span class="codetag">&gt;</span>download foo.exe<span class="codetag">&lt;/h:outputLink&gt;</span>
<span class="codetag">&lt;h:outputLink</span> value=<span class="codevalue">"resources/files/bar.zip"</span><span class="codetag">&gt;</span>download bar.zip<span class="codetag">&lt;/h:outputLink&gt;</span>
<span class="codetag">&lt;h:outputLink</span> value=<span class="codevalue">"resources/files/#{myBean.fileName}"</span><span class="codetag">&gt;</span>
    <span class="codetag">&lt;h:outputText</span> value=<span class="codevalue">"download #{myBean.fileName}"</span> <span class="codetag">/&gt;</span>
<span class="codetag">&lt;/h:outputLink&gt;</span>

<span class="codetag">&lt;h:graphicImage</span> value=<span class="codevalue">"resources/images/pic.jpg"</span> <span class="codetag">/&gt;</span>
<span class="codetag">&lt;h:graphicImage</span> value=<span class="codevalue">"resources/images/logo.gif"</span> <span class="codetag">/&gt;</span>
<span class="codetag">&lt;h:graphicImage</span> value=<span class="codevalue">"resources/images/#{myBean.imageFileName}"</span> <span class="codetag">/&gt;</span></pre>

<p><b>Important note:</b> this servlet example does not take the requested file as request parameter, but just as part of the absolute URL, because a certain widely used browser developed by a team in Redmond would take the last part of the servlet URL path as filename during the 'Save As' dialogue instead of the in the headers supplied filename. Using the filename as part of the absolute URL (and thus not as request parameter) will fix this utterly stupid behaviour. As a bonus, the URL's look much nicer without query parameters.</p>

<h5><a href="#top">Back to top</a></h5>

<p class="note"><b>Copyright</b> - <a href="http://www.gnu.org/licenses/lgpl.html" target="_blank">GNU Lesser General Public License</a></p>
<p class="update">(C) February 2009, BalusC</p>

<script>endHide('/2009/02/fileservlet-supporting-resume-and.html');</script>
<div style='clear: both;'></div>
</div>
<div class='post-footer'>
<div class='post-footer-line post-footer-line-1'><span class='post-author vcard'>
Geplaatst door
<span class='fn'>Bauke Scholtz</span>
</span>
<span class='post-timestamp'>
op
<a class='timestamp-link' href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html' rel='bookmark' title='permanent link'><abbr class='published' title='2009-02-18T11:22:00-04:00'>11:22 AM</abbr></a>
</span>
<span class='post-comment-link'>
</span>
<span class='post-icons'>
<span class='item-action'>
<a href='http://www.blogger.com/email-post.g?blogID=5396570633771229267&postID=5771569684313566405' title='Email Post'>
<img alt='' class='icon-action' height='13' src='http://img1.blogblog.com/img/icon18_email.gif' width='18'/>
</a>
</span>
<span class='item-control blog-admin pid-1237937722'>
<a href='http://www.blogger.com/post-edit.g?blogID=5396570633771229267&postID=5771569684313566405&from=pencil' title='Edit Post'>
<img alt='' class='icon-action' height='18' src='http://img2.blogblog.com/img/icon18_edit_allbkg.gif' width='18'/>
</a>
</span>
</span>
<div class='post-share-buttons'>
<a class='goog-inline-block share-button sb-email' href='http://www.blogger.com/share-post.g?blogID=5396570633771229267&postID=5771569684313566405&target=email' target='_blank' title='Email This'><span class='share-button-link-text'>Email This</span></a><a class='goog-inline-block share-button sb-blog' href='http://www.blogger.com/share-post.g?blogID=5396570633771229267&postID=5771569684313566405&target=blog' onclick='window.open(this.href, "_blank", "height=270,width=475"); return false;' target='_blank' title='BlogThis!'><span class='share-button-link-text'>BlogThis!</span></a><a class='goog-inline-block share-button sb-twitter' href='http://www.blogger.com/share-post.g?blogID=5396570633771229267&postID=5771569684313566405&target=twitter' target='_blank' title='Share to Twitter'><span class='share-button-link-text'>Share to Twitter</span></a><a class='goog-inline-block share-button sb-facebook' href='http://www.blogger.com/share-post.g?blogID=5396570633771229267&postID=5771569684313566405&target=facebook' onclick='window.open(this.href, "_blank", "height=430,width=640"); return false;' target='_blank' title='Share to Facebook'><span class='share-button-link-text'>Share to Facebook</span></a><a class='goog-inline-block share-button sb-pinterest' href='http://www.blogger.com/share-post.g?blogID=5396570633771229267&postID=5771569684313566405&target=pinterest' target='_blank' title='Share to Pinterest'><span class='share-button-link-text'>Share to Pinterest</span></a><div class='goog-inline-block dummy-container'><g:plusone source='blogger:blog:plusone' href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html' size='medium' width='300' annotation='inline'/></div>
</div>
</div>
<div class='post-footer-line post-footer-line-2'><span class='post-labels'>
Labels:
<a href='http://balusc.blogspot.com/search/label/Download%20File' rel='tag'>Download File</a>,
<a href='http://balusc.blogspot.com/search/label/JSF' rel='tag'>JSF</a>,
<a href='http://balusc.blogspot.com/search/label/JSP' rel='tag'>JSP</a>,
<a href='http://balusc.blogspot.com/search/label/Performance' rel='tag'>Performance</a>,
<a href='http://balusc.blogspot.com/search/label/Servlet' rel='tag'>Servlet</a>
</span>
</div>
<div class='post-footer-line post-footer-line-3'></div>
</div>
</div>
<div class='comments' id='comments'>
<a name='comments'></a>
<h4>78 comments:</h4>
<div id='Blog1_comments-block-wrapper'>
<dl class='avatar-comment-indent' id='comments-block'>
<dt class='comment-author ' id='c246252811037561246'>
<a name='c246252811037561246'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://www.blogger.com/profile/11509727936061891450" rel="nofollow" onclick="" class="avatar-hovercard" id="av-0-11509727936061891450"><img src="http://img2.blogblog.com/img/b16-rounded.gif" width="16" height="16" alt="" title="Sathya">

</a></span></div>
<a href='http://www.blogger.com/profile/11509727936061891450' rel='nofollow'>Sathya</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-246252811037561246'>
<p>
Hi BalusC,<BR/>Thanks for sharing this article.<BR/><BR/>I tried to use it but it always returns full document instead of byte range for a Linearized PDF. Based on your code it make sense as requested will not populate 'range' when clicked on a link to download. <BR/>Not sure how to initiate the byte-range streaming. Looks like I am missing a fundamental.<BR/><BR/>Thanks in advance.<BR/>- Satya
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1237179360000#c246252811037561246' title='comment permalink'>
March 16, 2009 at 12:56 AM
</a>
<span class='item-control blog-admin pid-1663041125'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=246252811037561246' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author blog-author' id='c8583408742920189058'>
<a name='c8583408742920189058'></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="http://www.blogger.com/profile/00299057045960008647" rel="nofollow" onclick="" class="avatar-hovercard" id="av-1-00299057045960008647"><img src="http://img1.blogblog.com/img/blank.gif" width="35" height="35" alt="" class="delayLoad" style="display: none;" longdesc="http://3.bp.blogspot.com/_4aRLuh8AW_A/SaImWjsoUPI/AAAAAAAAAaE/IeI_a-UHl7I/S45/baukebbq.jpg" title="BalusC">

<noscript><img src="http://3.bp.blogspot.com/_4aRLuh8AW_A/SaImWjsoUPI/AAAAAAAAAaE/IeI_a-UHl7I/S45/baukebbq.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href='http://www.blogger.com/profile/00299057045960008647' rel='nofollow'>BalusC</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-8583408742920189058'>
<p>
That entirely depends on how the client initiates the request. In this specific case it's Adobe Acrobat which should request the PDF file as byte ranges.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1237203600000#c8583408742920189058' title='comment permalink'>
March 16, 2009 at 7:40 AM
</a>
<span class='item-control blog-admin pid-1237937722'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=8583408742920189058' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c3453892386447597659'>
<a name='c3453892386447597659'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://www.blogger.com/profile/11509727936061891450" rel="nofollow" onclick="" class="avatar-hovercard" id="av-2-11509727936061891450"><img src="http://img2.blogblog.com/img/b16-rounded.gif" width="16" height="16" alt="" title="Sathya">

</a></span></div>
<a href='http://www.blogger.com/profile/11509727936061891450' rel='nofollow'>Sathya</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-3453892386447597659'>
<p>
I have a link on our website that points to FileServlet. When user clicks on the link it opens new popup window to display PDF document. In this scenario, how Acrobat can send initiate request byte ranges?<BR/><BR/>Should I be sending additional params as part of the request URL?
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1237204800000#c3453892386447597659' title='comment permalink'>
March 16, 2009 at 8:00 AM
</a>
<span class='item-control blog-admin pid-1663041125'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=3453892386447597659' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author blog-author' id='c318664327161966004'>
<a name='c318664327161966004'></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="http://www.blogger.com/profile/00299057045960008647" rel="nofollow" onclick="" class="avatar-hovercard" id="av-3-00299057045960008647"><img src="http://img1.blogblog.com/img/blank.gif" width="35" height="35" alt="" class="delayLoad" style="display: none;" longdesc="http://3.bp.blogspot.com/_4aRLuh8AW_A/SaImWjsoUPI/AAAAAAAAAaE/IeI_a-UHl7I/S45/baukebbq.jpg" title="BalusC">

<noscript><img src="http://3.bp.blogspot.com/_4aRLuh8AW_A/SaImWjsoUPI/AAAAAAAAAaE/IeI_a-UHl7I/S45/baukebbq.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href='http://www.blogger.com/profile/00299057045960008647' rel='nofollow'>BalusC</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-318664327161966004'>
<p>
As said, that depends on the client. You need to open the URL with Adobe Acrobat, not with your webbrowser.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1237214220000#c318664327161966004' title='comment permalink'>
March 16, 2009 at 10:37 AM
</a>
<span class='item-control blog-admin pid-1237937722'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=318664327161966004' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c8088115844026896082'>
<a name='c8088115844026896082'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://www.blogger.com/profile/09969007105938603712" rel="nofollow" onclick="" class="avatar-hovercard" id="av-4-09969007105938603712"><img src="http://img2.blogblog.com/img/b16-rounded.gif" width="16" height="16" alt="" title="Lilianne E. Blaze">

</a></span></div>
<a href='http://www.blogger.com/profile/09969007105938603712' rel='nofollow'>Lilianne E. Blaze</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-8088115844026896082'>
<p>
Great work, but could you please consider releasing it as LGPL (or Apache License / whatever) so it could be used with non-GPL code?
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1237269060000#c8088115844026896082' title='comment permalink'>
March 17, 2009 at 1:51 AM
</a>
<span class='item-control blog-admin pid-2002791629'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=8088115844026896082' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author blog-author' id='c1620365574452714728'>
<a name='c1620365574452714728'></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="http://www.blogger.com/profile/00299057045960008647" rel="nofollow" onclick="" class="avatar-hovercard" id="av-5-00299057045960008647"><img src="http://img1.blogblog.com/img/blank.gif" width="35" height="35" alt="" class="delayLoad" style="display: none;" longdesc="http://3.bp.blogspot.com/_4aRLuh8AW_A/SaImWjsoUPI/AAAAAAAAAaE/IeI_a-UHl7I/S45/baukebbq.jpg" title="BalusC">

<noscript><img src="http://3.bp.blogspot.com/_4aRLuh8AW_A/SaImWjsoUPI/AAAAAAAAAaE/IeI_a-UHl7I/S45/baukebbq.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href='http://www.blogger.com/profile/00299057045960008647' rel='nofollow'>BalusC</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-1620365574452714728'>
<p>
Good point. Haven't considered that closely enough. Done so ;)
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1237288380000#c1620365574452714728' title='comment permalink'>
March 17, 2009 at 7:13 AM
</a>
<span class='item-control blog-admin pid-1237937722'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=1620365574452714728' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c973293924543998114'>
<a name='c973293924543998114'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://www.blogger.com/profile/03410170541538817825" rel="nofollow" onclick="" class="avatar-hovercard" id="av-6-03410170541538817825"><img src="http://img2.blogblog.com/img/b16-rounded.gif" width="16" height="16" alt="" title="caegumelo">

</a></span></div>
<a href='http://www.blogger.com/profile/03410170541538817825' rel='nofollow'>caegumelo</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-973293924543998114'>
<p>
Hey BalusC, you da man! Your articles rock, good coding, I always come by to check what you`re up to.<br /><br />I have posted something on a SUN forum, would you help a brother out?<br /><br />http://forums.sun.com/thread.jspa?threadID=5381788&amp;tstart=0<br /><br />Thanks.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1240351980000#c973293924543998114' title='comment permalink'>
April 21, 2009 at 6:13 PM
</a>
<span class='item-control blog-admin pid-943305488'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=973293924543998114' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c5394480612335538542'>
<a name='c5394480612335538542'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://www.blogger.com/profile/07892120124223030574" rel="nofollow" onclick="" class="avatar-hovercard" id="av-7-07892120124223030574"><img src="http://img2.blogblog.com/img/b16-rounded.gif" width="16" height="16" alt="" title="rbulling">

</a></span></div>
<a href='http://www.blogger.com/profile/07892120124223030574' rel='nofollow'>rbulling</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-5394480612335538542'>
<p>
Thank you for writing and sharing this, this FileServlet was almost exactly what I needed. I&#39;ve enhanced this to have an extra, optional init parameter, &quot;useServletPath&quot;, that makes the FileServlet use the servlet path as part of its file mapping.<br /><br />So, for example, if you mapped the servlet to both &quot;/static/*&quot; and &quot;/foobar/*&quot; in web.xml, and used &quot;/temp&quot; as the basePath, it would be able to serve up the files &quot;/temp/static/test.txt&quot; and &quot;/temp/foobar/baz.jpg&quot; without having to declare the servlet twice.<br /><br />Would you like the patch?
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1244731023584#c5394480612335538542' title='comment permalink'>
June 11, 2009 at 10:37 AM
</a>
<span class='item-control blog-admin pid-430222385'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=5394480612335538542' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author blog-author' id='c2419714175008957775'>
<a name='c2419714175008957775'></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="http://www.blogger.com/profile/00299057045960008647" rel="nofollow" onclick="" class="avatar-hovercard" id="av-8-00299057045960008647"><img src="http://img1.blogblog.com/img/blank.gif" width="35" height="35" alt="" class="delayLoad" style="display: none;" longdesc="http://3.bp.blogspot.com/_4aRLuh8AW_A/SaImWjsoUPI/AAAAAAAAAaE/IeI_a-UHl7I/S45/baukebbq.jpg" title="BalusC">

<noscript><img src="http://3.bp.blogspot.com/_4aRLuh8AW_A/SaImWjsoUPI/AAAAAAAAAaE/IeI_a-UHl7I/S45/baukebbq.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href='http://www.blogger.com/profile/00299057045960008647' rel='nofollow'>BalusC</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-2419714175008957775'>
<p>
@rbulling: I like to keep it as basic as possible. You&#39;re free to make changes :)<br /><br />@anyone who is interested: today I added GZIP capabilities to the FileServlet. It will GZIP text content when the browser supports it. It will save up to 70% of network bandwidth! Useful if you have large CSS and JS files. In one of my projects the JS file, which actually exist of at least 4 merged JS files (jQuery and plugins) and is already minified, went from ~125KB to ~37KB!
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1245637723453#c2419714175008957775' title='comment permalink'>
June 21, 2009 at 10:28 PM
</a>
<span class='item-control blog-admin pid-1237937722'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=2419714175008957775' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c1701632547816001438'>
<a name='c1701632547816001438'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://www.blogger.com/profile/11619088121148305873" rel="nofollow" onclick="" class="avatar-hovercard" id="av-9-11619088121148305873"><img src="http://img2.blogblog.com/img/b16-rounded.gif" width="16" height="16" alt="" title="P">

</a></span></div>
<a href='http://www.blogger.com/profile/11619088121148305873' rel='nofollow'>P</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-1701632547816001438'>
<p>
Good stuff!<br />I&#39;ve worked today on task that seemed to be trivial: just compress data on the fly with ZIP and send the compressed archive to the browser for saving to the file system. Applied &quot;typical&quot; code for this. Spent then over half a day investigating why the file saved by the browser is corrupted. The answer was astonishing: somewhere in the process unwanted content was being added to the servlet response! And instead of getting &quot;raw&quot; binary data the response was &quot;decorated&quot; by the html code of current page attached at the end of stream.<br />In the case of data type which size can be predicted/calculated it is enough to set: <i>response.setHeader(&quot;Content-Length&quot;, String.valueOf(file.length()));</i><br />This &quot;trims&quot; the outputStream, so nothing unwanted can be appended. But in the case of compressed archive one cannot set the length as spotted in the example above. So, the question is how to deal with that? How to disable this extra content appearing in response? Likely it can depend on the used technologies, and I couldn&#8217;t find any solution to my problem in the net. Anyway this happens for JSF 1.2 (myfaces 1.2.3) + Facelets, with tomahawk 1.1.8 running with Spring 2.5 and SWF 2.0. As I remember it worked in the same manner with older versions as well.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1246562536774#c1701632547816001438' title='comment permalink'>
July 2, 2009 at 3:22 PM
</a>
<span class='item-control blog-admin pid-1610268024'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=1701632547816001438' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author blog-author' id='c8491132529543003841'>
<a name='c8491132529543003841'></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="http://www.blogger.com/profile/00299057045960008647" rel="nofollow" onclick="" class="avatar-hovercard" id="av-10-00299057045960008647"><img src="http://img1.blogblog.com/img/blank.gif" width="35" height="35" alt="" class="delayLoad" style="display: none;" longdesc="http://3.bp.blogspot.com/_4aRLuh8AW_A/SaImWjsoUPI/AAAAAAAAAaE/IeI_a-UHl7I/S45/baukebbq.jpg" title="BalusC">

<noscript><img src="http://3.bp.blogspot.com/_4aRLuh8AW_A/SaImWjsoUPI/AAAAAAAAAaE/IeI_a-UHl7I/S45/baukebbq.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href='http://www.blogger.com/profile/00299057045960008647' rel='nofollow'>BalusC</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-8491132529543003841'>
<p>
1) Do not use Writer. Use OutputStream only.<br />2) Handle in a Java class entirely (Servlet/Filter/Bean), not in a view page (JSP/JSF).<br />3) Call response.reset() before and response.close() after.<br />4) When request is covered by FacesServlet, call FacesContext#responseComplete() to avoid JSF postprocess the response (also see &quot;PDF handling&quot; article somewhere at this blog site).
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1246565488684#c8491132529543003841' title='comment permalink'>
July 2, 2009 at 4:11 PM
</a>
<span class='item-control blog-admin pid-1237937722'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=8491132529543003841' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c7022701543888653371'>
<a name='c7022701543888653371'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://www.blogger.com/profile/11619088121148305873" rel="nofollow" onclick="" class="avatar-hovercard" id="av-11-11619088121148305873"><img src="http://img2.blogblog.com/img/b16-rounded.gif" width="16" height="16" alt="" title="P">

</a></span></div>
<a href='http://www.blogger.com/profile/11619088121148305873' rel='nofollow'>P</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-7022701543888653371'>
<p>
That&#39;s good, that the principles of downloading a file were reminded in short. They are simple and obvious, and were applied to my original code. But still I&#39;m facing with the problem. Tried even a workaround by saving temporarily the zip to the file system and then read it, then get its size. In this case, although the resulting zip was of the same size as temp file, its content was cut. Besides, despite setting FacesContext#responseComplete(), JSF still does postprocessing. From many tests I did the conclusions are as follows: <br />1. perhaps something is missing when playing with zip, since text/xml can be saved correctly,<br />2. JSF ignores FacesContext#responseComplete() (it still enters RENDER_RESPONSE(6) phase after APPLY_REQUEST_VALUES(2)).
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1246627873566#c7022701543888653371' title='comment permalink'>
July 3, 2009 at 9:31 AM
</a>
<span class='item-control blog-admin pid-1610268024'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=7022701543888653371' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author blog-author' id='c5093822722869629313'>
<a name='c5093822722869629313'></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="http://www.blogger.com/profile/00299057045960008647" rel="nofollow" onclick="" class="avatar-hovercard" id="av-12-00299057045960008647"><img src="http://img1.blogblog.com/img/blank.gif" width="35" height="35" alt="" class="delayLoad" style="display: none;" longdesc="http://3.bp.blogspot.com/_4aRLuh8AW_A/SaImWjsoUPI/AAAAAAAAAaE/IeI_a-UHl7I/S45/baukebbq.jpg" title="BalusC">

<noscript><img src="http://3.bp.blogspot.com/_4aRLuh8AW_A/SaImWjsoUPI/AAAAAAAAAaE/IeI_a-UHl7I/S45/baukebbq.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href='http://www.blogger.com/profile/00299057045960008647' rel='nofollow'>BalusC</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-5093822722869629313'>
<p>
1) Are you saying that when you write it to a file, it is already corrupt? Did you read/write every byte properly? Did you close the streams? <br /><br />2) JSF will indeed just kick in the render response phase (to finalize some internals, e.g. releasing the FacesContext and so on), but it will not write anything to the response when you call responseComplete(). If it did, while you have explicitly closed the outputstream, you should have seen an IllegalStateException in the appserver logs.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1246666118988#c5093822722869629313' title='comment permalink'>
July 3, 2009 at 8:08 PM
</a>
<span class='item-control blog-admin pid-1237937722'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=5093822722869629313' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c3653991709432366102'>
<a name='c3653991709432366102'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://www.blogger.com/profile/11619088121148305873" rel="nofollow" onclick="" class="avatar-hovercard" id="av-13-11619088121148305873"><img src="http://img2.blogblog.com/img/b16-rounded.gif" width="16" height="16" alt="" title="P">

</a></span></div>
<a href='http://www.blogger.com/profile/11619088121148305873' rel='nofollow'>P</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-3653991709432366102'>
<p>
Perhaps I don&#39;t see something.<br />Ad.1) The same code is able to write correct zip file to the file system when instead of writing to the response i write to a file i.e.:<br /><i>ZipOutputStream out = new ZipOutputStream(new FileOutputStream(&quot;myfile.zip&quot;));</i><br />instead of:<br /><i>ZipOutputStream out = new ZipOutputStream(response.getOutputStream());</i><br /><br />I tried several methods of writing to the output stream. Writing seemed to be correct - but when it was saved then by browser it was corrupt.<br /><br />Here goes the code:<br /><i> public void exportToZipFile(String fileName, String fileExtension,  String dataToExport){<br />  ByteBuffer data = ByteBuffer.allocate(dataToExport.getBytes().length);<br /> data.put(dataToExport.getBytes()); <br /><br />  String filename = getOutputFileName(fileName) + &quot;.&quot; + fileExtension; // Filename suggested in browser Save As dialog<br />   FacesContext context = FacesContext.getCurrentInstance();<br />   HttpServletResponse response = (HttpServletResponse)context.getExternalContext().getResponse();<br />   response.reset();<br />   response.setContentType(&quot;application/zip&quot;);<br />   response.setHeader(&quot;Content-Disposition&quot;, &quot;attachment; filename=&quot; + filename); <br />   <br />   try {<br />    // Create the ZIP OutputStream<br />    ZipOutputStream out = new ZipOutputStream(response.getOutputStream());<br />                       <br />          ZipEntry entry = new ZipEntry(&quot;ODM.xml&quot;);<br />          out.putNextEntry(entry);  <br />          // Transfer bytes from the file to the ZIP file<br />          out.write(data.array());         <br />          // Complete the entry<br />          out.closeEntry();<br />          <br />          // Complete the ZIP file       <br />    out.flush();  <br />    out.close();<br />    <br />   response.flushBuffer(); <br />    context.responseComplete();     <br />    <br />      } catch (IOException e) {<br />      }<br /> }</i>
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1246706656717#c3653991709432366102' title='comment permalink'>
July 4, 2009 at 7:24 AM
</a>
<span class='item-control blog-admin pid-1610268024'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=3653991709432366102' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author blog-author' id='c5772876319611431268'>
<a name='c5772876319611431268'></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="http://www.blogger.com/profile/00299057045960008647" rel="nofollow" onclick="" class="avatar-hovercard" id="av-14-00299057045960008647"><img src="http://img1.blogblog.com/img/blank.gif" width="35" height="35" alt="" class="delayLoad" style="display: none;" longdesc="http://3.bp.blogspot.com/_4aRLuh8AW_A/SaImWjsoUPI/AAAAAAAAAaE/IeI_a-UHl7I/S45/baukebbq.jpg" title="BalusC">

<noscript><img src="http://3.bp.blogspot.com/_4aRLuh8AW_A/SaImWjsoUPI/AAAAAAAAAaE/IeI_a-UHl7I/S45/baukebbq.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href='http://www.blogger.com/profile/00299057045960008647' rel='nofollow'>BalusC</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-5772876319611431268'>
<p>
You&#39;re swallowing the IOException. Never ignore exceptions unless you exactly know what you&#39;re doing. Add a throws clause or at least e.printStackTrace(). Another tip: do the closing in finally block.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1246883959470#c5772876319611431268' title='comment permalink'>
July 6, 2009 at 8:39 AM
</a>
<span class='item-control blog-admin pid-1237937722'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=5772876319611431268' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c5367400666811513568'>
<a name='c5367400666811513568'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://www.blogger.com/profile/11619088121148305873" rel="nofollow" onclick="" class="avatar-hovercard" id="av-15-11619088121148305873"><img src="http://img2.blogblog.com/img/b16-rounded.gif" width="16" height="16" alt="" title="P">

</a></span></div>
<a href='http://www.blogger.com/profile/11619088121148305873' rel='nofollow'>P</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-5367400666811513568'>
<p>
I removed the exception handling intentionally to make the code snippet shorter. For the same reason the code contains only the most important things.<br />The problem, as it occurred, isn&#39;t a quite new. I faced with it a time ago and then forgot it then. But that time the file to be saved was text one and workaround was setting <i>&quot;Content-Length&quot;</i> in the Header. I&#39;m wondering where the problem lies. So, if the code follows the principles of dealing with response, maybe there is any configuration setting affecting the process or just a bug in the jsf implementation (I do not use RI)?
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1246888325084#c5367400666811513568' title='comment permalink'>
July 6, 2009 at 9:52 AM
</a>
<span class='item-control blog-admin pid-1610268024'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=5367400666811513568' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c2681672996027526490'>
<a name='c2681672996027526490'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://www.blogger.com/profile/15706199851188784134" rel="nofollow" onclick="" class="avatar-hovercard" id="av-16-15706199851188784134"><img src="http://img2.blogblog.com/img/b16-rounded.gif" width="16" height="16" alt="" title="Sharad">

</a></span></div>
<a href='http://www.blogger.com/profile/15706199851188784134' rel='nofollow'>Sharad</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-2681672996027526490'>
<p>
Hi Balu, I was working on video download code on iphone and getting some trouble. I did go thru your article. The video download works fine when its read as an file. but when the same file hosted in a different domain and is read thrugh HTTP (URLConnection), the video does not work on iphone.Any idea
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1249403150282#c2681672996027526490' title='comment permalink'>
August 4, 2009 at 12:25 PM
</a>
<span class='item-control blog-admin pid-1711605422'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=2681672996027526490' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author blog-author' id='c4593551125574977311'>
<a name='c4593551125574977311'></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="http://www.blogger.com/profile/00299057045960008647" rel="nofollow" onclick="" class="avatar-hovercard" id="av-17-00299057045960008647"><img src="http://img1.blogblog.com/img/blank.gif" width="35" height="35" alt="" class="delayLoad" style="display: none;" longdesc="http://3.bp.blogspot.com/_4aRLuh8AW_A/SaImWjsoUPI/AAAAAAAAAaE/IeI_a-UHl7I/S45/baukebbq.jpg" title="BalusC">

<noscript><img src="http://3.bp.blogspot.com/_4aRLuh8AW_A/SaImWjsoUPI/AAAAAAAAAaE/IeI_a-UHl7I/S45/baukebbq.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href='http://www.blogger.com/profile/00299057045960008647' rel='nofollow'>BalusC</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-4593551125574977311'>
<p>
A video stream is a blocking stream. You should keep the HTTP connection of URLConnection alive and read it as a blocking stream.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1249403242344#c4593551125574977311' title='comment permalink'>
August 4, 2009 at 12:27 PM
</a>
<span class='item-control blog-admin pid-1237937722'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=4593551125574977311' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c4421630752152211172'>
<a name='c4421630752152211172'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://www.blogger.com/profile/15706199851188784134" rel="nofollow" onclick="" class="avatar-hovercard" id="av-18-15706199851188784134"><img src="http://img2.blogblog.com/img/b16-rounded.gif" width="16" height="16" alt="" title="Dev">

</a></span></div>
<a href='http://www.blogger.com/profile/15706199851188784134' rel='nofollow'>Dev</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-4421630752152211172'>
<p>
Can plz you elaborate what you mean.<br />thanks
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1249407732435#c4421630752152211172' title='comment permalink'>
August 4, 2009 at 1:42 PM
</a>
<span class='item-control blog-admin pid-1711605422'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=4421630752152211172' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c8727590794953512133'>
<a name='c8727590794953512133'></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="http://www.blogger.com/profile/00726257090540274499" rel="nofollow" onclick="" class="avatar-hovercard" id="av-19-00726257090540274499"><img src="http://img1.blogblog.com/img/blank.gif" width="35" height="35" alt="" class="delayLoad" style="display: none;" longdesc="http://4.bp.blogspot.com/_T-WIIr1V2PU/SaJft2OEwmI/AAAAAAAAAAk/ZAPaT11TlyM/S45/avatar.php%253Fgravatar_id%253D373a135d08c969a8281be834af4e45b8%2526rating%253Dpg%2526size%253D80" title="Ole Christian Rynning">

<noscript><img src="http://4.bp.blogspot.com/_T-WIIr1V2PU/SaJft2OEwmI/AAAAAAAAAAk/ZAPaT11TlyM/S45/avatar.php%253Fgravatar_id%253D373a135d08c969a8281be834af4e45b8%2526rating%253Dpg%2526size%253D80" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href='http://www.blogger.com/profile/00726257090540274499' rel='nofollow'>Ole Christian Rynning</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-8727590794953512133'>
<p>
Nice Servlet, Thank you! This saved me some coding :)
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1260871647632#c8727590794953512133' title='comment permalink'>
December 15, 2009 at 6:07 AM
</a>
<span class='item-control blog-admin pid-1806556278'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=8727590794953512133' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c8644460932001550995'>
<a name='c8644460932001550995'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://www.blogger.com/profile/08507177677519842022" rel="nofollow" onclick="" class="avatar-hovercard" id="av-20-08507177677519842022"><img src="http://img2.blogblog.com/img/b16-rounded.gif" width="16" height="16" alt="" title="nodje">

</a></span></div>
<a href='http://www.blogger.com/profile/08507177677519842022' rel='nofollow'>nodje</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-8644460932001550995'>
<p>
Hi Balus<br /><br />nice servlet, I plan to use it to be able to share JS scripts in JARs accross apps, to avoid code duplication.<br /><br />However, if this fits, we&#39;ll be using it in our customer&#39;s application.<br />We&#39;re are not selling the application but we&#39;re getting paid to support and develop it.<br />How does that matches the licensing scheme in use?
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1262070356343#c8644460932001550995' title='comment permalink'>
December 29, 2009 at 3:05 AM
</a>
<span class='item-control blog-admin pid-1868902489'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=8644460932001550995' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author blog-author' id='c2373376235905551010'>
<a name='c2373376235905551010'></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="http://www.blogger.com/profile/00299057045960008647" rel="nofollow" onclick="" class="avatar-hovercard" id="av-21-00299057045960008647"><img src="http://img1.blogblog.com/img/blank.gif" width="35" height="35" alt="" class="delayLoad" style="display: none;" longdesc="http://1.bp.blogspot.com/_4aRLuh8AW_A/Su25CCJtt4I/AAAAAAAAAbM/O4MJ9LWSIFA/S45/165816.jpg" title="BalusC">

<noscript><img src="http://1.bp.blogspot.com/_4aRLuh8AW_A/Su25CCJtt4I/AAAAAAAAAbM/O4MJ9LWSIFA/S45/165816.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href='http://www.blogger.com/profile/00299057045960008647' rel='nofollow'>BalusC</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-2373376235905551010'>
<p>
@nodje: You can do so.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1262093420366#c2373376235905551010' title='comment permalink'>
December 29, 2009 at 9:30 AM
</a>
<span class='item-control blog-admin pid-1237937722'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=2373376235905551010' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c5083187499791211614'>
<a name='c5083187499791211614'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://www.blogger.com/profile/08507177677519842022" rel="nofollow" onclick="" class="avatar-hovercard" id="av-22-08507177677519842022"><img src="http://img2.blogblog.com/img/b16-rounded.gif" width="16" height="16" alt="" title="nodje">

</a></span></div>
<a href='http://www.blogger.com/profile/08507177677519842022' rel='nofollow'>nodje</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-5083187499791211614'>
<p>
thanks Balus.<br /><br />Actually after a little examination, I realize I need to get access to the classpath, not the file system, to be able to share JAR contained resources.<br /><br />But your Servlet is still a clever way to do that. I just have to add the code to look into getClass().getResources(...).<br />I&#39;m struggling to have the FileServlet automatically and transparently look both into filesystem and classpath.<br /><br />I&#39;m a little wary about the security issues though, I&#39;d be giving access to the entire classpath!!<br />I assume limiting the lookup into a directory only, such as the &#39;resources&#39; you use, should be safe for the rest of the classpath below that directory.<br /><br />What do you think, does it make any sense for you to add this capability to your servlet?<br /><br />Anyway let me know if you&#39;re interested or have other views on the problem.<br /><br />Happy New Year!
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1262230223790#c5083187499791211614' title='comment permalink'>
December 30, 2009 at 11:30 PM
</a>
<span class='item-control blog-admin pid-1868902489'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=5083187499791211614' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c6793324583772427621'>
<a name='c6793324583772427621'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://www.blogger.com/profile/18161844485527023173" rel="nofollow" onclick="" class="avatar-hovercard" id="av-23-18161844485527023173"><img src="http://img2.blogblog.com/img/b16-rounded.gif" width="16" height="16" alt="" title="Eric">

</a></span></div>
<a href='http://www.blogger.com/profile/18161844485527023173' rel='nofollow'>Eric</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-6793324583772427621'>
<p>
Hi BalusC,<br /><br />I&#39;ve created an ant project which creates a binary jar, sources jar and javadoc jar. The project uses your source code with a very small change -- I added a generated serialVersionUID. The project is available on github: http://github.com/t11e/balusc_file_servlet<br />Initial versions of the three files are available for download from the github project.<br /><br />Kind regards,<br />Eric Meyer
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1264693971480#c6793324583772427621' title='comment permalink'>
January 28, 2010 at 11:52 AM
</a>
<span class='item-control blog-admin pid-1020890813'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=6793324583772427621' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author blog-author' id='c4501708337268979045'>
<a name='c4501708337268979045'></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="http://www.blogger.com/profile/00299057045960008647" rel="nofollow" onclick="" class="avatar-hovercard" id="av-24-00299057045960008647"><img src="http://img1.blogblog.com/img/blank.gif" width="35" height="35" alt="" class="delayLoad" style="display: none;" longdesc="http://1.bp.blogspot.com/_4aRLuh8AW_A/Su25CCJtt4I/AAAAAAAAAbM/O4MJ9LWSIFA/S45/165816.jpg" title="BalusC">

<noscript><img src="http://1.bp.blogspot.com/_4aRLuh8AW_A/Su25CCJtt4I/AAAAAAAAAbM/O4MJ9LWSIFA/S45/165816.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href='http://www.blogger.com/profile/00299057045960008647' rel='nofollow'>BalusC</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-4501708337268979045'>
<p>
Cool, that&#39;s truly no problem :)
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1264695120127#c4501708337268979045' title='comment permalink'>
January 28, 2010 at 12:12 PM
</a>
<span class='item-control blog-admin pid-1237937722'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=4501708337268979045' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c300119954410264059'>
<a name='c300119954410264059'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://www.blogger.com/profile/08658858578944809147" rel="nofollow" onclick="" class="avatar-hovercard" id="av-25-08658858578944809147"><img src="http://img2.blogblog.com/img/b16-rounded.gif" width="16" height="16" alt="" title="&#1044;&#1072;&#1085;&#1080;&#1077;&#1083; &#1057;&#1083;&#1072;&#1074;&#1086;&#1074;">

</a></span></div>
<a href='http://www.blogger.com/profile/08658858578944809147' rel='nofollow'> </a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-300119954410264059'>
<p>
Great stuff! It is very helpful. I have a question. Where should I put some code that deletes the file after it is fully sent to the browser?<br /><br />Thanks in advance<br />Daniel
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1268335968423#c300119954410264059' title='comment permalink'>
March 11, 2010 at 3:32 PM
</a>
<span class='item-control blog-admin pid-1585001189'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=300119954410264059' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c5341047608910475236'>
<a name='c5341047608910475236'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://www.blogger.com/profile/07705309519827274513" rel="nofollow" onclick="" class="avatar-hovercard" id="av-26-07705309519827274513"><img src="http://img2.blogblog.com/img/b16-rounded.gif" width="16" height="16" alt="" title="Josh">

</a></span></div>
<a href='http://www.blogger.com/profile/07705309519827274513' rel='nofollow'>Josh</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-5341047608910475236'>
<span class='deleted-comment'>This comment has been removed by the author.</span>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1268341533503#c5341047608910475236' title='comment permalink'>
March 11, 2010 at 5:05 PM
</a>
<span class='item-control blog-admin '>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=5341047608910475236' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c115641454379874066'>
<a name='c115641454379874066'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://www.blogger.com/profile/07705309519827274513" rel="nofollow" onclick="" class="avatar-hovercard" id="av-27-07705309519827274513"><img src="http://img2.blogblog.com/img/b16-rounded.gif" width="16" height="16" alt="" title="Josh">

</a></span></div>
<a href='http://www.blogger.com/profile/07705309519827274513' rel='nofollow'>Josh</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-115641454379874066'>
<span class='deleted-comment'>This comment has been removed by the author.</span>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1268341867870#c115641454379874066' title='comment permalink'>
March 11, 2010 at 5:11 PM
</a>
<span class='item-control blog-admin '>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=115641454379874066' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author blog-author' id='c624271956199525342'>
<a name='c624271956199525342'></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="http://www.blogger.com/profile/00299057045960008647" rel="nofollow" onclick="" class="avatar-hovercard" id="av-28-00299057045960008647"><img src="http://img1.blogblog.com/img/blank.gif" width="35" height="35" alt="" class="delayLoad" style="display: none;" longdesc="http://1.bp.blogspot.com/_4aRLuh8AW_A/Su25CCJtt4I/AAAAAAAAAbM/O4MJ9LWSIFA/S45/165816.jpg" title="BalusC">

<noscript><img src="http://1.bp.blogspot.com/_4aRLuh8AW_A/Su25CCJtt4I/AAAAAAAAAbM/O4MJ9LWSIFA/S45/165816.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href='http://www.blogger.com/profile/00299057045960008647' rel='nofollow'>BalusC</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-624271956199525342'>
<p>
@Daniel: at end of method, after the close().<br /><br />@Josh: thanks for the feedback.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1268342644276#c624271956199525342' title='comment permalink'>
March 11, 2010 at 5:24 PM
</a>
<span class='item-control blog-admin pid-1237937722'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=624271956199525342' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c56755677426074724'>
<a name='c56755677426074724'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://www.blogger.com/profile/07705309519827274513" rel="nofollow" onclick="" class="avatar-hovercard" id="av-29-07705309519827274513"><img src="http://img2.blogblog.com/img/b16-rounded.gif" width="16" height="16" alt="" title="Josh">

</a></span></div>
<a href='http://www.blogger.com/profile/07705309519827274513' rel='nofollow'>Josh</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-56755677426074724'>
<p>
[deleted my early comments to consolidate]<br /><br />A few points.<br /><br />You say you MUST include the Etag and Last-Modified headers, that&#39;s incorrect. Either-Or will do, Etag being preferred. ETag is the Http/1.1 revision of Last-Modified and in all reality much more reliable for Conditional GET then Last-Modified (being that second granularity in today&#39;s internet is simply not enough).<br /><br />Also, the chance of two random strings generating the same MD5 hash is so remote that your comment about not using MD5 is pretty far off the mark. Now using truncated MD5 strings is a bad idea, but the full MD5 hash is probably better then anything you can come up with on your own.<br /><br />Your understanding of conditional GET is incorrect.  If a server recieves a GET with an Etag value that does not match the current representation then the correct response is a 200 that contains the current representation (and a 304 &quot;Not Modified&quot; with no content body if the Etags match).  Not a 412 &quot;Precondition Failed&quot; response.  The 412 is used during a PUT when the client is trying to replace the representation but  does not have the correct Etag of the actual current representation.<br /><br />Per the HTTP/1.1 spec, a Range header with an invalid format is not cause for a 416.  Invalid format range headers should be ignored and a normal 200 response should be returned.  Only Ranges outside the available content range (i.e. a file of 2K and the want the 5000 byte, or the start offset to greater then the end offset) are cause for a 416.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1268345513693#c56755677426074724' title='comment permalink'>
March 11, 2010 at 6:11 PM
</a>
<span class='item-control blog-admin pid-302531647'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=56755677426074724' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c1036852451815037101'>
<a name='c1036852451815037101'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://www.blogger.com/profile/08658858578944809147" rel="nofollow" onclick="" class="avatar-hovercard" id="av-30-08658858578944809147"><img src="http://img2.blogblog.com/img/b16-rounded.gif" width="16" height="16" alt="" title="&#1044;&#1072;&#1085;&#1080;&#1077;&#1083; &#1057;&#1083;&#1072;&#1074;&#1086;&#1074;">

</a></span></div>
<a href='http://www.blogger.com/profile/08658858578944809147' rel='nofollow'> </a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-1036852451815037101'>
<p>
@BalusC<br /><br />Thanks for your comment.<br /><br />The problem I have is when using this servlet to send files to iPod/iPhone. It seems iPhone makes multiple requests to get the full file and if I delete the file in the finally block it will be delete after the first request, and so the file will not be sent to the iPhone. I need somehow to understand that the last chunk has been sent. Any ideas will be appreciated.<br /><br />Regards, <br />Daniel
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1268383178701#c1036852451815037101' title='comment permalink'>
March 12, 2010 at 4:39 AM
</a>
<span class='item-control blog-admin pid-1585001189'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=1036852451815037101' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c3016253532483513356'>
<a name='c3016253532483513356'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://www.blogger.com/profile/07638960202413118983" rel="nofollow" onclick="" class="avatar-hovercard" id="av-31-07638960202413118983"><img src="http://img2.blogblog.com/img/b16-rounded.gif" width="16" height="16" alt="" title="Jake">

</a></span></div>
<a href='http://www.blogger.com/profile/07638960202413118983' rel='nofollow'>Jake</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-3016253532483513356'>
<p>
Hi,<br /><br />We were getting broken pipe exceptions while integrating with a genome visualizer (IGV from Broad) and found your code to be very useful for handling range bytes. <br /><br />Thanks very much,<br />Jake@ISB
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1270487084074#c3016253532483513356' title='comment permalink'>
April 5, 2010 at 1:04 PM
</a>
<span class='item-control blog-admin pid-1656980364'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=3016253532483513356' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c18596886853635551'>
<a name='c18596886853635551'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://www.blogger.com/profile/07042317916038010992" rel="nofollow" onclick="" class="avatar-hovercard" id="av-32-07042317916038010992"><img src="http://img2.blogblog.com/img/b16-rounded.gif" width="16" height="16" alt="" title="jcm&uacute;zimo">

</a></span></div>
<a href='http://www.blogger.com/profile/07042317916038010992' rel='nofollow'>jcmzimo</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-18596886853635551'>
<p>
Excelente codigo amigo, muchas gracias. :D
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1286578162221#c18596886853635551' title='comment permalink'>
October 8, 2010 at 6:49 PM
</a>
<span class='item-control blog-admin pid-822226385'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=18596886853635551' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c53352445533226393'>
<a name='c53352445533226393'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://www.blogger.com/profile/13852660742133965148" rel="nofollow" onclick="" class="avatar-hovercard" id="av-33-13852660742133965148"><img src="http://img2.blogblog.com/img/b16-rounded.gif" width="16" height="16" alt="" title="Namita">

</a></span></div>
<a href='http://www.blogger.com/profile/13852660742133965148' rel='nofollow'>Namita</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-53352445533226393'>
<p>
Whats the difference between the addHeader() and setHeader() .
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1293635237937#c53352445533226393' title='comment permalink'>
December 29, 2010 at 11:07 AM
</a>
<span class='item-control blog-admin pid-602095465'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=53352445533226393' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c7399015757815444093'>
<a name='c7399015757815444093'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://www.blogger.com/profile/13852660742133965148" rel="nofollow" onclick="" class="avatar-hovercard" id="av-34-13852660742133965148"><img src="http://img2.blogblog.com/img/b16-rounded.gif" width="16" height="16" alt="" title="Namita">

</a></span></div>
<a href='http://www.blogger.com/profile/13852660742133965148' rel='nofollow'>Namita</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-7399015757815444093'>
<p>
Hi Balusc,<br /><br />We are having issues in setting the eTag header.First we used setHeader(&quot;ETag&quot;,value) but the containHeader(&quot;ETag&quot;) returns as false.<br />Then we Tried using addHeader(&quot;ETag&quot;,value) still we get the containHeader(&quot;ETag&quot;) as returns false<br /><br />Could please let me now wat could be the issue.<br /><br />Thanks and Regards,<br />Namita
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1293635863251#c7399015757815444093' title='comment permalink'>
December 29, 2010 at 11:17 AM
</a>
<span class='item-control blog-admin pid-602095465'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=7399015757815444093' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author blog-author' id='c5656396139005298004'>
<a name='c5656396139005298004'></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="http://www.blogger.com/profile/00299057045960008647" rel="nofollow" onclick="" class="avatar-hovercard" id="av-35-00299057045960008647"><img src="http://img1.blogblog.com/img/blank.gif" width="35" height="35" alt="" class="delayLoad" style="display: none;" longdesc="http://1.bp.blogspot.com/_4aRLuh8AW_A/Su25CCJtt4I/AAAAAAAAAbM/O4MJ9LWSIFA/S45/165816.jpg" title="BalusC">

<noscript><img src="http://1.bp.blogspot.com/_4aRLuh8AW_A/Su25CCJtt4I/AAAAAAAAAbM/O4MJ9LWSIFA/S45/165816.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href='http://www.blogger.com/profile/00299057045960008647' rel='nofollow'>BalusC</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-5656396139005298004'>
<p>
@Namita: addHeader() will add the given value to the given header name if it already exist. Otherwise it will just create one. setHeader() will override any existing header on the same given header name.<br /><br />As to your concrete problem, I don&#39;t know what containsHeader() is. Be sure that you check the response headers, not the request headers with containsHeader(). Better yet, use a HTTP traffic debugger which can show the headers being transferred, like Firebug (check the &quot;Net&quot; panel).
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1293761686134#c5656396139005298004' title='comment permalink'>
December 30, 2010 at 10:14 PM
</a>
<span class='item-control blog-admin pid-1237937722'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=5656396139005298004' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c4092828249045428126'>
<a name='c4092828249045428126'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://www.blogger.com/profile/16181319382214253418" rel="nofollow" onclick="" class="avatar-hovercard" id="av-36-16181319382214253418"><img src="http://img2.blogblog.com/img/b16-rounded.gif" width="16" height="16" alt="" title="Peter J">

</a></span></div>
<a href='http://www.blogger.com/profile/16181319382214253418' rel='nofollow'>Peter J</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-4092828249045428126'>
<p>
Hi BalusC,<br />I had just implemented my own downloader to use from Tomcat, based on the DefaultServlet. I like your version because it implements gzip, so I am testing it.<br /><br />One question, when calling doHead for a full file, the Content-Length is set to 0. Is this conformant with the http spec?<br /><br />I am inclined to change your code so that Content-Length is returned in that case.<br /><br />Best regards,<br />Peter<br /><br />p.s. coincidentally, I am updating my server code to behave more correctly with IGV.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1303422970928#c4092828249045428126' title='comment permalink'>
April 21, 2011 at 5:56 PM
</a>
<span class='item-control blog-admin pid-2136053722'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=4092828249045428126' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c2405294675187753840'>
<a name='c2405294675187753840'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://www.blogger.com/profile/08011006813922225652" rel="nofollow" onclick="" class="avatar-hovercard" id="av-37-08011006813922225652"><img src="http://img2.blogblog.com/img/b16-rounded.gif" width="16" height="16" alt="" title="Ali">

</a></span></div>
<a href='http://www.blogger.com/profile/08011006813922225652' rel='nofollow'>Ali</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-2405294675187753840'>
<p>
Hi BalusC,<br /><br />Many thanks. That saved me lot of time in coding. I was able to successfully integrate this with my JSF portlet code.<br /><br />Cheers<br /><br />Ali Syed
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1316181278778#c2405294675187753840' title='comment permalink'>
September 16, 2011 at 9:54 AM
</a>
<span class='item-control blog-admin pid-717205624'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=2405294675187753840' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c2392052528210571625'>
<a name='c2392052528210571625'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://www.blogger.com/profile/08114627611854029152" rel="nofollow" onclick="" class="avatar-hovercard" id="av-38-08114627611854029152"><img src="http://img2.blogblog.com/img/b16-rounded.gif" width="16" height="16" alt="" title="healeyb">

</a></span></div>
<a href='http://www.blogger.com/profile/08114627611854029152' rel='nofollow'>healeyb</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-2392052528210571625'>
<p>
Hi BalusC, I&#39;m trying to apply the caching principles to a filter to send a 304 when the browser has an up to date copy. The chrome browser stores the etag like this:  W/&quot;15475-1326469468158. The server side code sent this: styleSheet.css_15475_1326469468158. It looks like I&#39;m trying to compare the right things, but the matches() method doesn&#39;t return true. Could this be the quotes? Thanks.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1326505385826#c2392052528210571625' title='comment permalink'>
January 13, 2012 at 9:43 PM
</a>
<span class='item-control blog-admin pid-2038367071'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=2392052528210571625' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c6184886452371606341'>
<a name='c6184886452371606341'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://www.blogger.com/profile/08114627611854029152" rel="nofollow" onclick="" class="avatar-hovercard" id="av-39-08114627611854029152"><img src="http://img2.blogblog.com/img/b16-rounded.gif" width="16" height="16" alt="" title="healeyb">

</a></span></div>
<a href='http://www.blogger.com/profile/08114627611854029152' rel='nofollow'>healeyb</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-6184886452371606341'>
<p>
I see the problem now - glassfish is for some reason overriding my setting of the ETag header. I set Cache-Control in the same place, but ETag gets lost along the way for some reason. I saw a post saying to disable the file cache on the http-listeners, so I did that, but still have the problem. Will bring it up with the g/f people. Thanks. Great servlet.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1326512483689#c6184886452371606341' title='comment permalink'>
January 13, 2012 at 11:41 PM
</a>
<span class='item-control blog-admin pid-2038367071'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=6184886452371606341' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c4451077655012495867'>
<a name='c4451077655012495867'></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="http://www.blogger.com/profile/04693562210661284099" rel="nofollow" onclick="" class="avatar-hovercard" id="av-40-04693562210661284099"><img src="http://img1.blogblog.com/img/blank.gif" width="35" height="35" alt="" class="delayLoad" style="display: none;" longdesc="http://2.bp.blogspot.com/_KebKGNmNvDU/SasWFWZvlqI/AAAAAAAAAMw/O7XkKLaAPfE/S45/small.jpeg" title="Avramucz P&eacute;ter">

<noscript><img src="http://2.bp.blogspot.com/_KebKGNmNvDU/SasWFWZvlqI/AAAAAAAAAMw/O7XkKLaAPfE/S45/small.jpeg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href='http://www.blogger.com/profile/04693562210661284099' rel='nofollow'>Avramucz Pter</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-4451077655012495867'>
<p>
Hi! Great and working code! Could you please change the license as Lilianne E. Blaze asked?
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1328625318123#c4451077655012495867' title='comment permalink'>
February 7, 2012 at 10:35 AM
</a>
<span class='item-control blog-admin pid-580597876'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=4451077655012495867' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c600972522002008815'>
<a name='c600972522002008815'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://www.blogger.com/profile/07370724070819001936" rel="nofollow" onclick="" class="avatar-hovercard" id="av-41-07370724070819001936"><img src="http://img2.blogblog.com/img/b16-rounded.gif" width="16" height="16" alt="" title="TABS MAN">

</a></span></div>
<a href='http://www.blogger.com/profile/07370724070819001936' rel='nofollow'>TABS MAN</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-600972522002008815'>
<p>
Great code. Yet still cann&#39;t undserstand why uploading video file is impossible. I got this as error:<br /><br />java.lang.ClassCastException: org.apache.commons.fileupload.FileUploadException cannot be cast to org.apache.commons.fileupload.FileItem<br /> ANY HELP
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1328793697644#c600972522002008815' title='comment permalink'>
February 9, 2012 at 9:21 AM
</a>
<span class='item-control blog-admin pid-649143027'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=600972522002008815' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c4887538207521531888'>
<a name='c4887538207521531888'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://www.blogger.com/profile/13100085942042150505" rel="nofollow" onclick="" class="avatar-hovercard" id="av-42-13100085942042150505"><img src="http://img2.blogblog.com/img/b16-rounded.gif" width="16" height="16" alt="" title="JakedUp">

</a></span></div>
<a href='http://www.blogger.com/profile/13100085942042150505' rel='nofollow'>JakedUp</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-4887538207521531888'>
<p>
Hey man, great job on the FileServlet script for Java. It&#39;s very complex to say the least!<br /><br />I come from a PHP background, and I am starting to learn Java. I am pretty good at modularizing scripts so that I can call them dynamically using functions. But Java is a little more complex than PHP, so I am still trying to wrap my head around the code differences. How would I go about making this script a little more dynamic, by allowing the basePath to be called via a function? e.g. Sometimes I would want to download a file from example.com and sometimes foobar.com. Any suggestions you can provide would be awesome!
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1332517322167#c4887538207521531888' title='comment permalink'>
March 23, 2012 at 11:42 AM
</a>
<span class='item-control blog-admin pid-301476726'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=4887538207521531888' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c7068889694924172271'>
<a name='c7068889694924172271'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://www.blogger.com/profile/03234353593832475316" rel="nofollow" onclick="" class="avatar-hovercard" id="av-43-03234353593832475316"><img src="http://img2.blogblog.com/img/b16-rounded.gif" width="16" height="16" alt="" title="Roman">

</a></span></div>
<a href='http://www.blogger.com/profile/03234353593832475316' rel='nofollow'>Roman</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-7068889694924172271'>
<p>
Thanks for this servlet. Good job!<br />Very helpful for me.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1337152193253#c7068889694924172271' title='comment permalink'>
May 16, 2012 at 3:09 AM
</a>
<span class='item-control blog-admin pid-390530799'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=7068889694924172271' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c1811489464888168387'>
<a name='c1811489464888168387'></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="http://www.blogger.com/profile/08826637355577644350" rel="nofollow" onclick="" class="avatar-hovercard" id="av-44-08826637355577644350"><img src="http://img1.blogblog.com/img/blank.gif" width="35" height="35" alt="" class="delayLoad" style="display: none;" longdesc="http://2.bp.blogspot.com/-tXDmLl0WFUM/TXalyhkfOuI/AAAAAAAAFgE/vYZ8Y3Gq5ag/s45/as.jpeg" title="mindas">

<noscript><img src="http://2.bp.blogspot.com/-tXDmLl0WFUM/TXalyhkfOuI/AAAAAAAAFgE/vYZ8Y3Gq5ag/s45/as.jpeg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href='http://www.blogger.com/profile/08826637355577644350' rel='nofollow'>mindas</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-1811489464888168387'>
<p>
I have ported this code to my project and observed some strange client behaviour on some Apple platforms. More on this: http://stackoverflow.com/questions/12637728/http-byte-range-protocol-client-behaviour-on-ipad-iphone<br /><br />I&#39;d appreciate if anyone could comment on these findings.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1348832590544#c1811489464888168387' title='comment permalink'>
September 28, 2012 at 7:43 AM
</a>
<span class='item-control blog-admin pid-1719326060'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=1811489464888168387' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c8456626223653392214'>
<a name='c8456626223653392214'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://www.blogger.com/profile/11620815081574882533" rel="nofollow" onclick="" class="avatar-hovercard" id="av-45-11620815081574882533"><img src="http://img2.blogblog.com/img/b16-rounded.gif" width="16" height="16" alt="" title="Karsten Pflum biggest fan">

</a></span></div>
<a href='http://www.blogger.com/profile/11620815081574882533' rel='nofollow'>Karsten Pflum biggest fan</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-8456626223653392214'>
<p>
Cheers for the article. This saved me hours of research and coding. Cheers to you once more!
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1348988243310#c8456626223653392214' title='comment permalink'>
September 30, 2012 at 2:57 AM
</a>
<span class='item-control blog-admin pid-759397283'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=8456626223653392214' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c5484613188436168868'>
<a name='c5484613188436168868'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://www.blogger.com/profile/05845854522688123741" rel="nofollow" onclick="" class="avatar-hovercard" id="av-46-05845854522688123741"><img src="http://img2.blogblog.com/img/b16-rounded.gif" width="16" height="16" alt="" title="Jordan Marinov">

</a></span></div>
<a href='http://www.blogger.com/profile/05845854522688123741' rel='nofollow'>Jordan Marinov</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-5484613188436168868'>
<p>
I had problems with &quot;response.setHeader(&quot;Content-Length&quot;, String.valueOf(r.length));&quot;, instead I had to use &quot;response.setContentLength((int) r.length);&quot;. Otherwise great stuff!
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1349034129942#c5484613188436168868' title='comment permalink'>
September 30, 2012 at 3:42 PM
</a>
<span class='item-control blog-admin pid-1023986482'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=5484613188436168868' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c2335970436141690410'>
<a name='c2335970436141690410'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://www.blogger.com/profile/06261350535812593297" rel="nofollow" onclick="" class="avatar-hovercard" id="av-47-06261350535812593297"><img src="http://img2.blogblog.com/img/b16-rounded.gif" width="16" height="16" alt="" title="TT">

</a></span></div>
<a href='http://www.blogger.com/profile/06261350535812593297' rel='nofollow'>TT</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-2335970436141690410'>
<p>
Note that you should put quotes around the eTag value in the response.  So it should look like this:<br /><br /> response.setHeader(&quot;ETag&quot;, &quot;\&quot;&quot; + eTag + &quot;\&quot;&quot;);<br /><br />Examples from RFC2616:<br /><br />      ETag: &quot;xyzzy&quot;<br />      ETag: W/&quot;xyzzy&quot;<br />      ETag: 
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1350086179498#c2335970436141690410' title='comment permalink'>
October 12, 2012 at 7:56 PM
</a>
<span class='item-control blog-admin pid-17125808'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=2335970436141690410' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c1998272595631598542'>
<a name='c1998272595631598542'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://www.blogger.com/profile/11641600190820639208" rel="nofollow" onclick="" class="avatar-hovercard" id="av-48-11641600190820639208"><img src="http://img2.blogblog.com/img/b16-rounded.gif" width="16" height="16" alt="" title="Raghu Ravindra">

</a></span></div>
<a href='http://www.blogger.com/profile/11641600190820639208' rel='nofollow'>Raghu Ravindra</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-1998272595631598542'>
<p>
Hi this code seems works fine locally when am trying in apache tomcat and access localhost:8084 but in LAN when i try to access , it&#39;s showing save popup window ..... it is not playing video in browser ..... any Suggestions
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1356688978622#c1998272595631598542' title='comment permalink'>
December 28, 2012 at 6:02 AM
</a>
<span class='item-control blog-admin pid-1456672325'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=1998272595631598542' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c2231772259629703649'>
<a name='c2231772259629703649'></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="http://www.blogger.com/profile/07898080556205583763" rel="nofollow" onclick="" class="avatar-hovercard" id="av-49-07898080556205583763"><img src="http://img1.blogblog.com/img/blank.gif" width="35" height="35" alt="" class="delayLoad" style="display: none;" longdesc="//lh5.googleusercontent.com/-DST0IVIevwg/AAAAAAAAAAI/AAAAAAAAAEM/r-FEkEsmvHM/s512-c/photo.jpg" title="javad sabbagh">

<noscript><img src="//lh5.googleusercontent.com/-DST0IVIevwg/AAAAAAAAAAI/AAAAAAAAAEM/r-FEkEsmvHM/s512-c/photo.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href='http://www.blogger.com/profile/07898080556205583763' rel='nofollow'>javad sabbagh</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-2231772259629703649'>
<p>
What a wonderful weblog!<br />Thank you Bauke.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1356986543435#c2231772259629703649' title='comment permalink'>
December 31, 2012 at 4:42 PM
</a>
<span class='item-control blog-admin pid-784025335'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=2231772259629703649' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c8141066952087205945'>
<a name='c8141066952087205945'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://www.blogger.com/profile/14522473184198782731" rel="nofollow" onclick="" class="avatar-hovercard" id="av-50-14522473184198782731"><img src="http://img2.blogblog.com/img/b16-rounded.gif" width="16" height="16" alt="" title="Atul Dambalkar">

</a></span></div>
<a href='http://www.blogger.com/profile/14522473184198782731' rel='nofollow'>Atul Dambalkar</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-8141066952087205945'>
<p>
Hi Bauke,<br /><br />Thanks for this well-written blog post. I have modified it slightly and used it to develop a Spring view. I will publish that code.<br /><br />Thanks again,<br /><br />-Atul
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1358421358943#c8141066952087205945' title='comment permalink'>
January 17, 2013 at 7:15 AM
</a>
<span class='item-control blog-admin pid-332019719'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=8141066952087205945' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c3591544585409200265'>
<a name='c3591544585409200265'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://openid.aol.com/opaque/a9237034-883b-11e2-b256-000bcdcb5194" rel="nofollow" onclick="" class="avatar-hovercard" id="av-51-06721671795914970215"><img src="http://img1.blogblog.com/img/openid16-rounded.gif" width="16" height="16" alt="" title="a9237034-883b-11e2-b256-000bcdcb5194">

</a></span></div>
<a href='https://openid.aol.com/opaque/a9237034-883b-11e2-b256-000bcdcb5194' rel='nofollow'>a9237034-883b-11e2-b256-000bcdcb5194</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-3591544585409200265'>
<p>
Great work on this code, very useful!<br /><br />I tried this on my browser and it downloaded the file; the file being an image. How can I get it to just display the image in the browsers instead of downloading it?
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1362780081797#c3591544585409200265' title='comment permalink'>
March 8, 2013 at 6:01 PM
</a>
<span class='item-control blog-admin pid-265771241'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=3591544585409200265' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author blog-author' id='c3970047638909024340'>
<a name='c3970047638909024340'></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="http://www.blogger.com/profile/00299057045960008647" rel="nofollow" onclick="" class="avatar-hovercard" id="av-52-00299057045960008647"><img src="http://img1.blogblog.com/img/blank.gif" width="35" height="35" alt="" class="delayLoad" style="display: none;" longdesc="//lh6.googleusercontent.com/-j8Rawt4S_Tk/AAAAAAAAAAI/AAAAAAAAAx8/oEmZ_w-JwAM/s512-c/photo.jpg" title="Bauke Scholtz">

<noscript><img src="//lh6.googleusercontent.com/-j8Rawt4S_Tk/AAAAAAAAAAI/AAAAAAAAAx8/oEmZ_w-JwAM/s512-c/photo.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href='http://www.blogger.com/profile/00299057045960008647' rel='nofollow'>Bauke Scholtz</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-3970047638909024340'>
<p>
Use HTML &lt;img&gt; element.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1362780365864#c3970047638909024340' title='comment permalink'>
March 8, 2013 at 6:06 PM
</a>
<span class='item-control blog-admin pid-1237937722'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=3970047638909024340' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c6957477338195394866'>
<a name='c6957477338195394866'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://www.blogger.com/profile/05334971319045681171" rel="nofollow" onclick="" class="avatar-hovercard" id="av-53-05334971319045681171"><img src="http://img2.blogblog.com/img/b16-rounded.gif" width="16" height="16" alt="" title="Lakshya Kumar">

</a></span></div>
<a href='http://www.blogger.com/profile/05334971319045681171' rel='nofollow'>Lakshya Kumar</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-6957477338195394866'>
<p>
Hi BalusC, I am using your FileServlet for GZIP compressions and it was working fine until I started using JSF 2 h:outputScript and h:outputStylesheet tags for resource versioning. Now gzip is not working because the URL pattern of FileServlet not matching with the url pattern generated by these JSF tags (h:outputStylesheet etc.). I also tried to change the URL pattern in web.xml from &#39;/resources/*&#39; to &#39;/faces/javax.faces.resource/*&#39; but after this I got 404 error for all the css and js files. Please let me know how to work it out, as I am using primefaces 3.5 lib and due to which my page load time is suffering badly as primefaces includes many js and css files into my page and their sizes are also heavy.<br /><br />Thanks in advance.<br />- Sandeep
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1363376618408#c6957477338195394866' title='comment permalink'>
March 15, 2013 at 3:43 PM
</a>
<span class='item-control blog-admin pid-456344761'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=6957477338195394866' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author blog-author' id='c3212200039912886909'>
<a name='c3212200039912886909'></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="http://www.blogger.com/profile/00299057045960008647" rel="nofollow" onclick="" class="avatar-hovercard" id="av-54-00299057045960008647"><img src="http://img1.blogblog.com/img/blank.gif" width="35" height="35" alt="" class="delayLoad" style="display: none;" longdesc="//lh6.googleusercontent.com/-j8Rawt4S_Tk/AAAAAAAAAAI/AAAAAAAAAx8/oEmZ_w-JwAM/s512-c/photo.jpg" title="Bauke Scholtz">

<noscript><img src="//lh6.googleusercontent.com/-j8Rawt4S_Tk/AAAAAAAAAAI/AAAAAAAAAx8/oEmZ_w-JwAM/s512-c/photo.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href='http://www.blogger.com/profile/00299057045960008647' rel='nofollow'>Bauke Scholtz</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-3212200039912886909'>
<p>
Lakshya: use GzipResponseFilter of OmniFaces.<br />http://showcase.omnifaces.org/filters/GzipResponseFilter
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1363376710467#c3212200039912886909' title='comment permalink'>
March 15, 2013 at 3:45 PM
</a>
<span class='item-control blog-admin pid-1237937722'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=3212200039912886909' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c1827356794638052300'>
<a name='c1827356794638052300'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://www.blogger.com/profile/05334971319045681171" rel="nofollow" onclick="" class="avatar-hovercard" id="av-55-05334971319045681171"><img src="http://img2.blogblog.com/img/b16-rounded.gif" width="16" height="16" alt="" title="Lakshya Kumar">

</a></span></div>
<a href='http://www.blogger.com/profile/05334971319045681171' rel='nofollow'>Lakshya Kumar</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-1827356794638052300'>
<p>
Thanks BalusC for your reply..<br />Please let me know how to use this filter. I have configured it in the web.xml but where do I find jar files library for that filter. Or do I need to copy all the three source files and place those in org.omnifaces.filter package in my application? Also do I need any license to use this filter or it is free to use. Thanks!
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1363377742111#c1827356794638052300' title='comment permalink'>
March 15, 2013 at 4:02 PM
</a>
<span class='item-control blog-admin pid-456344761'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=1827356794638052300' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author blog-author' id='c5578857116135041913'>
<a name='c5578857116135041913'></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="http://www.blogger.com/profile/00299057045960008647" rel="nofollow" onclick="" class="avatar-hovercard" id="av-56-00299057045960008647"><img src="http://img1.blogblog.com/img/blank.gif" width="35" height="35" alt="" class="delayLoad" style="display: none;" longdesc="//lh6.googleusercontent.com/-j8Rawt4S_Tk/AAAAAAAAAAI/AAAAAAAAAx8/oEmZ_w-JwAM/s512-c/photo.jpg" title="Bauke Scholtz">

<noscript><img src="//lh6.googleusercontent.com/-j8Rawt4S_Tk/AAAAAAAAAAI/AAAAAAAAAx8/oEmZ_w-JwAM/s512-c/photo.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href='http://www.blogger.com/profile/00299057045960008647' rel='nofollow'>Bauke Scholtz</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-5578857116135041913'>
<p>
Lakshya: just install OmniFaces JAR. See <a href="http://showcase.omnifaces.org" rel="nofollow">showcase homepage</a> or <a href="https://code.google.com/p/omnifaces/" rel="nofollow">project homepage</a> for instructions.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1363377849229#c5578857116135041913' title='comment permalink'>
March 15, 2013 at 4:04 PM
</a>
<span class='item-control blog-admin pid-1237937722'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=5578857116135041913' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c2418022598068400654'>
<a name='c2418022598068400654'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://www.blogger.com/profile/05334971319045681171" rel="nofollow" onclick="" class="avatar-hovercard" id="av-57-05334971319045681171"><img src="http://img2.blogblog.com/img/b16-rounded.gif" width="16" height="16" alt="" title="Lakshya Kumar">

</a></span></div>
<a href='http://www.blogger.com/profile/05334971319045681171' rel='nofollow'>Lakshya Kumar</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-2418022598068400654'>
<p>
Thanks a lot BalusC. Gzip compression is working now with the help of OmniFaces filter. BalusC I have one more problem in my JSF application, can I ask this favor as well from you. Please let me know where can I post that question? in this blog or at stackoverflow? Many thanks!! you are truly genius... :)
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1363380802095#c2418022598068400654' title='comment permalink'>
March 15, 2013 at 4:53 PM
</a>
<span class='item-control blog-admin pid-456344761'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=2418022598068400654' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author blog-author' id='c4843653943985194730'>
<a name='c4843653943985194730'></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="http://www.blogger.com/profile/00299057045960008647" rel="nofollow" onclick="" class="avatar-hovercard" id="av-58-00299057045960008647"><img src="http://img1.blogblog.com/img/blank.gif" width="35" height="35" alt="" class="delayLoad" style="display: none;" longdesc="//lh6.googleusercontent.com/-j8Rawt4S_Tk/AAAAAAAAAAI/AAAAAAAAAx8/oEmZ_w-JwAM/s512-c/photo.jpg" title="Bauke Scholtz">

<noscript><img src="//lh6.googleusercontent.com/-j8Rawt4S_Tk/AAAAAAAAAAI/AAAAAAAAAx8/oEmZ_w-JwAM/s512-c/photo.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href='http://www.blogger.com/profile/00299057045960008647' rel='nofollow'>Bauke Scholtz</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-4843653943985194730'>
<p>
Please post questions at Stack Overflow.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1363380863016#c4843653943985194730' title='comment permalink'>
March 15, 2013 at 4:54 PM
</a>
<span class='item-control blog-admin pid-1237937722'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=4843653943985194730' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c5649890256878172243'>
<a name='c5649890256878172243'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://www.blogger.com/profile/02263285244155744538" rel="nofollow" onclick="" class="avatar-hovercard" id="av-59-02263285244155744538"><img src="http://img2.blogblog.com/img/b16-rounded.gif" width="16" height="16" alt="" title="Akshay Sahu">

</a></span></div>
<a href='http://www.blogger.com/profile/02263285244155744538' rel='nofollow'>Akshay Sahu</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-5649890256878172243'>
<p>
How should I send a Range value. I cannot see the range header being sent from your HTML code.<br /><br />And because of this, the code at the server will never get into the if condition present at the line number 139.<br /><br />And it will always get into the if condition present at the line number 466.<br /><br />Can you please an example code with Range header.<br /><br />Thanks in Advance,<br />Akshay Sahu
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1364976398292#c5649890256878172243' title='comment permalink'>
April 3, 2013 at 4:06 AM
</a>
<span class='item-control blog-admin pid-1188650963'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=5649890256878172243' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c7373020694114870443'>
<a name='c7373020694114870443'></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="http://www.blogger.com/profile/17007348281400323789" rel="nofollow" onclick="" class="avatar-hovercard" id="av-60-17007348281400323789"><img src="http://img1.blogblog.com/img/blank.gif" width="35" height="35" alt="" class="delayLoad" style="display: none;" longdesc="//lh5.googleusercontent.com/-XIOvSZaehug/AAAAAAAAAAI/AAAAAAAAxXg/v2Bbhfpi0tg/s512-c/photo.jpg" title="Broc Seib">

<noscript><img src="//lh5.googleusercontent.com/-XIOvSZaehug/AAAAAAAAAAI/AAAAAAAAxXg/v2Bbhfpi0tg/s512-c/photo.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href='http://www.blogger.com/profile/17007348281400323789' rel='nofollow'>Broc Seib</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-7373020694114870443'>
<p>
Hey BalusC,<br /><br />Should the 304 status codes be sent using response.sendError() rather than setHeader() et al.?<br /><br />I noticed some odd behavior: 1) my client got the 304 just fine, but 2) my tomcat server was logging hits to my &quot;/last-ditch&quot; error page per a catch-all error page config in my web.xml, i.e.,<br /><br /><br />  /last-ditch-error-page<br /><br />
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1367028334778#c7373020694114870443' title='comment permalink'>
April 26, 2013 at 10:05 PM
</a>
<span class='item-control blog-admin pid-939689200'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=7373020694114870443' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c7399897557281736673'>
<a name='c7399897557281736673'></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="http://www.blogger.com/profile/17007348281400323789" rel="nofollow" onclick="" class="avatar-hovercard" id="av-61-17007348281400323789"><img src="http://img1.blogblog.com/img/blank.gif" width="35" height="35" alt="" class="delayLoad" style="display: none;" longdesc="//lh5.googleusercontent.com/-XIOvSZaehug/AAAAAAAAAAI/AAAAAAAAxXg/v2Bbhfpi0tg/s512-c/photo.jpg" title="Broc Seib">

<noscript><img src="//lh5.googleusercontent.com/-XIOvSZaehug/AAAAAAAAAAI/AAAAAAAAxXg/v2Bbhfpi0tg/s512-c/photo.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href='http://www.blogger.com/profile/17007348281400323789' rel='nofollow'>Broc Seib</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-7399897557281736673'>
<p>
Shoot, I forget that blogger doesn&#39;t like html-ish angle brackets... Let me try once more before giving up. :-)<br /><br />Here my catch-all error page config from my web.xml:<br /><br />&lt;error-page&gt;<br />  &lt;location&gt;/last-ditch-error-page&lt;/location&gt;<br />&lt;/error-page&gt;
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1367028499957#c7399897557281736673' title='comment permalink'>
April 26, 2013 at 10:08 PM
</a>
<span class='item-control blog-admin pid-939689200'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=7399897557281736673' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c3752001213347362345'>
<a name='c3752001213347362345'></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="http://www.blogger.com/profile/17007348281400323789" rel="nofollow" onclick="" class="avatar-hovercard" id="av-62-17007348281400323789"><img src="http://img1.blogblog.com/img/blank.gif" width="35" height="35" alt="" class="delayLoad" style="display: none;" longdesc="//lh5.googleusercontent.com/-XIOvSZaehug/AAAAAAAAAAI/AAAAAAAAxXg/v2Bbhfpi0tg/s512-c/photo.jpg" title="Broc Seib">

<noscript><img src="//lh5.googleusercontent.com/-XIOvSZaehug/AAAAAAAAAAI/AAAAAAAAxXg/v2Bbhfpi0tg/s512-c/photo.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href='http://www.blogger.com/profile/17007348281400323789' rel='nofollow'>Broc Seib</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-3752001213347362345'>
<p>
&gt;<br />&gt; 1nn/2nn/3nn responses are not errors. <br />&gt;<br /><br />To clarify, I believe two places in your code above (where it returns 304) should use setStatus() rather than sendError().
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1367111072747#c3752001213347362345' title='comment permalink'>
April 27, 2013 at 9:04 PM
</a>
<span class='item-control blog-admin pid-939689200'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=3752001213347362345' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c3575113417801431233'>
<a name='c3575113417801431233'></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="http://www.blogger.com/profile/18029662465015574033" rel="nofollow" onclick="" class="avatar-hovercard" id="av-63-18029662465015574033"><img src="http://img1.blogblog.com/img/blank.gif" width="35" height="35" alt="" class="delayLoad" style="display: none;" longdesc="//lh5.googleusercontent.com/-vPXywK2jcPE/AAAAAAAAAAI/AAAAAAAAkLc/X9bGTt5c8ik/s512-c/photo.jpg" title="Steve Boutilier">

<noscript><img src="//lh5.googleusercontent.com/-vPXywK2jcPE/AAAAAAAAAAI/AAAAAAAAkLc/X9bGTt5c8ik/s512-c/photo.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href='http://www.blogger.com/profile/18029662465015574033' rel='nofollow'>Steve Boutilier</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-3575113417801431233'>
<p>
Thanks BalusC.  I needed a servlet that could serve up wav files from a database with partial content support so they work in the HTML5 audio tag.  With a little modification, this worked perfectly!
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1369496750438#c3575113417801431233' title='comment permalink'>
May 25, 2013 at 11:45 AM
</a>
<span class='item-control blog-admin pid-47459680'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=3575113417801431233' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c8031318772697076937'>
<a name='c8031318772697076937'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://www.blogger.com/profile/17571142214582977052" rel="nofollow" onclick="" class="avatar-hovercard" id="av-64-17571142214582977052"><img src="http://img2.blogblog.com/img/b16-rounded.gif" width="16" height="16" alt="" title="cgullcharlie">

</a></span></div>
<a href='http://www.blogger.com/profile/17571142214582977052' rel='nofollow'>cgullcharlie</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-8031318772697076937'>
<p>
Hi BalusC, can you please clarify the license detail &quot; You&#39;re free to make changes whenever needed as long as it&#39;s not for commercial use.&quot;<br />If we want to make changes and we want to use commercially, what then?
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1369925726724#c8031318772697076937' title='comment permalink'>
May 30, 2013 at 10:55 AM
</a>
<span class='item-control blog-admin pid-852838536'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=8031318772697076937' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c2312702482356909802'>
<a name='c2312702482356909802'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://www.blogger.com/profile/04176419159600308278" rel="nofollow" onclick="" class="avatar-hovercard" id="av-65-04176419159600308278"><img src="http://img2.blogblog.com/img/b16-rounded.gif" width="16" height="16" alt="" title="Michele (nikhes)">

</a></span></div>
<a href='http://www.blogger.com/profile/04176419159600308278' rel='nofollow'>Michele (nikhes)</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-2312702482356909802'>
<p>
Hi, i have problem only with firefox. <br /><br />Firefox not send the header  &quot;If-None-Match&quot; or &quot;If-Modified-Since&quot; header.<br /><br />help pls ;(
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1370084901574#c2312702482356909802' title='comment permalink'>
June 1, 2013 at 7:08 AM
</a>
<span class='item-control blog-admin pid-1676555323'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=2312702482356909802' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c7116719949718216373'>
<a name='c7116719949718216373'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://www.blogger.com/profile/03075272231389197443" rel="nofollow" onclick="" class="avatar-hovercard" id="av-66-03075272231389197443"><img src="http://img2.blogblog.com/img/b16-rounded.gif" width="16" height="16" alt="" title="Shasha">

</a></span></div>
<a href='http://www.blogger.com/profile/03075272231389197443' rel='nofollow'>Shasha</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-7116719949718216373'>
<span class='deleted-comment'>This comment has been removed by the author.</span>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1379672590375#c7116719949718216373' title='comment permalink'>
September 20, 2013 at 6:23 AM
</a>
<span class='item-control blog-admin '>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=7116719949718216373' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c50925057385926204'>
<a name='c50925057385926204'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://www.blogger.com/profile/03075272231389197443" rel="nofollow" onclick="" class="avatar-hovercard" id="av-67-03075272231389197443"><img src="http://img2.blogblog.com/img/b16-rounded.gif" width="16" height="16" alt="" title="Shasha">

</a></span></div>
<a href='http://www.blogger.com/profile/03075272231389197443' rel='nofollow'>Shasha</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-50925057385926204'>
<p>
<b>Hi BalusC</b><br /><br /><a rel="nofollow">could you please put the java code which can upload say xml file using resume option</a><br /><br /><i>Sha</i>
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1379672742192#c50925057385926204' title='comment permalink'>
September 20, 2013 at 6:25 AM
</a>
<span class='item-control blog-admin pid-1767911706'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=50925057385926204' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c6793650442111838339'>
<a name='c6793650442111838339'></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="http://www.blogger.com/profile/06422309851518892469" rel="nofollow" onclick="" class="avatar-hovercard" id="av-68-06422309851518892469"><img src="http://img1.blogblog.com/img/blank.gif" width="35" height="35" alt="" class="delayLoad" style="display: none;" longdesc="//lh5.googleusercontent.com/-UUZedikfW4w/AAAAAAAAAAI/AAAAAAAAAAA/_3r1xXnCe7E/s512-c/photo.jpg" title="kavita dixit">

<noscript><img src="//lh5.googleusercontent.com/-UUZedikfW4w/AAAAAAAAAAI/AAAAAAAAAAA/_3r1xXnCe7E/s512-c/photo.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href='http://www.blogger.com/profile/06422309851518892469' rel='nofollow'>kavita dixit</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-6793650442111838339'>
<p>
Hi BalusC,<br /><br />COuld you please share the java client code for this fileservlet
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1379923996314#c6793650442111838339' title='comment permalink'>
September 23, 2013 at 4:13 AM
</a>
<span class='item-control blog-admin pid-551272091'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=6793650442111838339' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c7404969966542084376'>
<a name='c7404969966542084376'></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="http://www.blogger.com/profile/06422309851518892469" rel="nofollow" onclick="" class="avatar-hovercard" id="av-69-06422309851518892469"><img src="http://img1.blogblog.com/img/blank.gif" width="35" height="35" alt="" class="delayLoad" style="display: none;" longdesc="//lh5.googleusercontent.com/-UUZedikfW4w/AAAAAAAAAAI/AAAAAAAAAAA/_3r1xXnCe7E/s512-c/photo.jpg" title="kavita dixit">

<noscript><img src="//lh5.googleusercontent.com/-UUZedikfW4w/AAAAAAAAAAI/AAAAAAAAAAA/_3r1xXnCe7E/s512-c/photo.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href='http://www.blogger.com/profile/06422309851518892469' rel='nofollow'>kavita dixit</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-7404969966542084376'>
<p>
Hi BalusC,<br /><br />COuld you please share the java client code for this fileservlet
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1379924099875#c7404969966542084376' title='comment permalink'>
September 23, 2013 at 4:14 AM
</a>
<span class='item-control blog-admin pid-551272091'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=7404969966542084376' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c3094753132665424368'>
<a name='c3094753132665424368'></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="http://www.blogger.com/profile/01896575286410167236" rel="nofollow" onclick="" class="avatar-hovercard" id="av-70-01896575286410167236"><img src="http://img1.blogblog.com/img/blank.gif" width="35" height="35" alt="" class="delayLoad" style="display: none;" longdesc="http://3.bp.blogspot.com/_QJI4nxcMlNk/S0I7EhcwvZI/AAAAAAAAAB4/oFcrMfC29CE/S45/98.JPG" title="mukesh">

<noscript><img src="http://3.bp.blogspot.com/_QJI4nxcMlNk/S0I7EhcwvZI/AAAAAAAAAB4/oFcrMfC29CE/S45/98.JPG" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href='http://www.blogger.com/profile/01896575286410167236' rel='nofollow'>mukesh</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-3094753132665424368'>
<p>
Hi BalusC,<br /> Thank you so so so much......<br /> <br />Thanks for sharing this article.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1386929561050#c3094753132665424368' title='comment permalink'>
December 13, 2013 at 6:12 AM
</a>
<span class='item-control blog-admin pid-749193229'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=3094753132665424368' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c3895492616632269392'>
<a name='c3895492616632269392'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://www.blogger.com/profile/10088855234530238230" rel="nofollow" onclick="" class="avatar-hovercard" id="av-71-10088855234530238230"><img src="http://img2.blogblog.com/img/b16-rounded.gif" width="16" height="16" alt="" title="qrs">

</a></span></div>
<a href='http://www.blogger.com/profile/10088855234530238230' rel='nofollow'>qrs</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-3895492616632269392'>
<p>
Has anyone experienced any problems using this code with PDFs and IE?<br /> <br />What we are seeing is the download proceeding normally in chunks and then being interrupted by the server presumably due to a bad byte range or other header issue. <br /><br />We&#39;ve seen this problem with some PDF files (not all) and several different versions of IE including IE 9.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1392045497522#c3895492616632269392' title='comment permalink'>
February 10, 2014 at 11:18 AM
</a>
<span class='item-control blog-admin pid-109272199'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=3895492616632269392' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c4576524328360278935'>
<a name='c4576524328360278935'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://www.blogger.com/profile/09980035082192501734" rel="nofollow" onclick="" class="avatar-hovercard" id="av-72-09980035082192501734"><img src="http://img2.blogblog.com/img/b16-rounded.gif" width="16" height="16" alt="" title="anand&amp;#39;s blog">

</a></span></div>
<a href='http://www.blogger.com/profile/09980035082192501734' rel='nofollow'>anand's blog</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-4576524328360278935'>
<p>
i used this servlet with html5 audio <br /><br />i am getting pipe broken exception when i play the audio using html5 audio player.<br /><br />give me a solution to resolve this issue<br /><br />thanks in advance,<br /><br />-Anand
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1400995316817#c4576524328360278935' title='comment permalink'>
May 25, 2014 at 1:21 AM
</a>
<span class='item-control blog-admin pid-767917743'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=4576524328360278935' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c5793856588260779410'>
<a name='c5793856588260779410'></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="http://www.blogger.com/profile/00199169070302289787" rel="nofollow" onclick="" class="avatar-hovercard" id="av-73-00199169070302289787"><img src="http://img1.blogblog.com/img/blank.gif" width="35" height="35" alt="" class="delayLoad" style="display: none;" longdesc="http://1.bp.blogspot.com/_TOuXTVjeR-Y/TPhK8Zj1iuI/AAAAAAAAAB4/61cSl8364mI/S45/2828_102714910010_728465010_3055854_7581509_n.jpg" title="Mohamad Hosafy">

<noscript><img src="http://1.bp.blogspot.com/_TOuXTVjeR-Y/TPhK8Zj1iuI/AAAAAAAAAB4/61cSl8364mI/S45/2828_102714910010_728465010_3055854_7581509_n.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href='http://www.blogger.com/profile/00199169070302289787' rel='nofollow'>Mohamad Hosafy</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-5793856588260779410'>
<span class='deleted-comment'>This comment has been removed by the author.</span>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1404220741658#c5793856588260779410' title='comment permalink'>
July 1, 2014 at 9:19 AM
</a>
<span class='item-control blog-admin '>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=5793856588260779410' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c410973101972718542'>
<a name='c410973101972718542'></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="http://www.blogger.com/profile/00199169070302289787" rel="nofollow" onclick="" class="avatar-hovercard" id="av-74-00199169070302289787"><img src="http://img1.blogblog.com/img/blank.gif" width="35" height="35" alt="" class="delayLoad" style="display: none;" longdesc="http://1.bp.blogspot.com/_TOuXTVjeR-Y/TPhK8Zj1iuI/AAAAAAAAAB4/61cSl8364mI/S45/2828_102714910010_728465010_3055854_7581509_n.jpg" title="Mohamad Hosafy">

<noscript><img src="http://1.bp.blogspot.com/_TOuXTVjeR-Y/TPhK8Zj1iuI/AAAAAAAAAB4/61cSl8364mI/S45/2828_102714910010_728465010_3055854_7581509_n.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href='http://www.blogger.com/profile/00199169070302289787' rel='nofollow'>Mohamad Hosafy</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-410973101972718542'>
<p>
Couldn&#39;t run this to stream videos (using HTML5 Video tag) with IE9 or IE11, can you please help out with this ?<br /><br />Thank you so much, great job
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1404220830270#c410973101972718542' title='comment permalink'>
July 1, 2014 at 9:20 AM
</a>
<span class='item-control blog-admin pid-1035205515'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=410973101972718542' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c2014894239656705845'>
<a name='c2014894239656705845'></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="http://www.blogger.com/profile/00199169070302289787" rel="nofollow" onclick="" class="avatar-hovercard" id="av-75-00199169070302289787"><img src="http://img1.blogblog.com/img/blank.gif" width="35" height="35" alt="" class="delayLoad" style="display: none;" longdesc="http://1.bp.blogspot.com/_TOuXTVjeR-Y/TPhK8Zj1iuI/AAAAAAAAAB4/61cSl8364mI/S45/2828_102714910010_728465010_3055854_7581509_n.jpg" title="Mohamad Hosafy">

<noscript><img src="http://1.bp.blogspot.com/_TOuXTVjeR-Y/TPhK8Zj1iuI/AAAAAAAAAB4/61cSl8364mI/S45/2828_102714910010_728465010_3055854_7581509_n.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href='http://www.blogger.com/profile/00199169070302289787' rel='nofollow'>Mohamad Hosafy</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-2014894239656705845'>
<p>
Found it, added MIME types for videos like mp4 and such in he web.xml cause IE doesn&#39;t support the application/octet-stream MIMEtype for video streaming.<br /><br />Thank you :)
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1404634169385#c2014894239656705845' title='comment permalink'>
July 6, 2014 at 4:09 AM
</a>
<span class='item-control blog-admin pid-1035205515'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=2014894239656705845' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c1709849390349360711'>
<a name='c1709849390349360711'></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="http://www.blogger.com/profile/05380234920333023541" rel="nofollow" onclick="" class="avatar-hovercard" id="av-76-05380234920333023541"><img src="http://img1.blogblog.com/img/blank.gif" width="35" height="35" alt="" class="delayLoad" style="display: none;" longdesc="//lh3.googleusercontent.com/--zT97zN2ZXo/AAAAAAAAAAI/AAAAAAAAF-Q/TWWAJxn8xEI/s512-c/photo.jpg" title="Daniel Heriberto Almaguer Mel&eacute;ndez">

<noscript><img src="//lh3.googleusercontent.com/--zT97zN2ZXo/AAAAAAAAAAI/AAAAAAAAF-Q/TWWAJxn8xEI/s512-c/photo.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href='http://www.blogger.com/profile/05380234920333023541' rel='nofollow'>Daniel Heriberto Almaguer Melndez</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-1709849390349360711'>
<p>
How can I modify this to get the parameter from the URL? My videos are hosted in another server and I&#39;d like to just pass the URL with a parameter (don&#39;t really mind about the IE issue for the moment)<br /><br />Thanks!
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1415385080844#c1709849390349360711' title='comment permalink'>
November 7, 2014 at 2:31 PM
</a>
<span class='item-control blog-admin pid-286808518'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=1709849390349360711' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c3860560686760554252'>
<a name='c3860560686760554252'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="http://www.blogger.com/profile/01865499828492934804" rel="nofollow" onclick="" class="avatar-hovercard" id="av-77-01865499828492934804"><img src="http://img2.blogblog.com/img/b16-rounded.gif" width="16" height="16" alt="" title="Zeus">

</a></span></div>
<a href='http://www.blogger.com/profile/01865499828492934804' rel='nofollow'>Zeus</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-3860560686760554252'>
<p>
Please help me, My problem is to stream .mp4 with Your code and it is almost done properly, but the stream is always corrupted at the end of a movie ex.: film is 57mins long - on 52 second fail occurred with message: &quot;A network error cause the stream fail part way.&quot;, I&#39;ve tried to test it several times, thought that it was really network problem - but it always the same.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?showComment=1419273062472#c3860560686760554252' title='comment permalink'>
December 22, 2014 at 2:31 PM
</a>
<span class='item-control blog-admin pid-1492688157'>
<a class='comment-delete' href='http://www.blogger.com/delete-comment.g?blogID=5396570633771229267&postID=3860560686760554252' title='Delete Comment'>
<img src='//www.blogger.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
</dl>
</div>
<p class='comment-footer'>
<a href='http://www.blogger.com/comment.g?blogID=5396570633771229267&amp;postID=5771569684313566405' onclick=''>Post a Comment</a>
</p>
<div id='backlinks-container'>
<div id='Blog1_backlinks-container'>
</div>
</div>
</div>
</div>

        </div></div>
      
<!-- google_ad_section_end -->
</div>
<div class='blog-pager' id='blog-pager'>
<span id='blog-pager-newer-link'>
<a class='blog-pager-newer-link' href='http://balusc.blogspot.com/2009/05/unicode-how-to-get-characters-right.html' id='Blog1_blog-pager-newer-link' title='Newer Post'>Newer Post</a>
</span>
<span id='blog-pager-older-link'>
<a class='blog-pager-older-link' href='http://balusc.blogspot.com/2008/10/effective-datatable-paging-and-sorting.html' id='Blog1_blog-pager-older-link' title='Older Post'>Older Post</a>
</span>
<a class='home-link' href='http://balusc.blogspot.com/'>Home</a>
</div>
<div class='clear'></div>
<div class='post-feeds'>
<div class='feed-links'>
Subscribe to:
<a class='feed-link' href='http://balusc.blogspot.com/feeds/5771569684313566405/comments/default' target='_blank' type='application/atom+xml'>Post Comments (Atom)</a>
</div>
</div>
<script type="text/javascript">window.___gcfg = {'lang': 'en'};</script>
</div></div>
</div>
<div id='sidebar-wrapper'>
<div class='sidebar section' id='sidebar'><div class='widget Profile' id='Profile1'>
<h2>About</h2>
<div class='widget-content'>
<a href='https://plus.google.com/113917986381339001702'><img alt='My Photo' class='profile-img' height='80' src='//lh6.googleusercontent.com/-j8Rawt4S_Tk/AAAAAAAAAAI/AAAAAAAABsM/lcWTOsx-LrA/s80-c/photo.jpg' width='80'/></a>
<dl class='profile-datablock'>
<dt class='profile-data'>
<a class='profile-name-link g-profile' href='https://plus.google.com/113917986381339001702' rel='author' style='background-image: url(//www.google.com/images/icons/ui/gprofile_button-16.png);'>
Bauke Scholtz
</a>
<br/>
<div class='g-follow' data-annotation='bubble' data-height='20' data-href='https://plus.google.com/113917986381339001702'></div>
</dt>
<dd class='profile-textblock'>Deaf webapp specialist.</dd>
</dl>
<a class='profile-link' href='https://plus.google.com/113917986381339001702' rel='author'>View my complete profile</a>
<div class='clear'></div>
<span class='widget-item-control'>
<span class='item-control blog-admin'>
<a class='quickedit' href='//www.blogger.com/rearrange?blogID=5396570633771229267&widgetType=Profile&widgetId=Profile1&action=editWidget&sectionId=sidebar' onclick='return _WidgetManager._PopupConfig(document.getElementById("Profile1"));' target='configProfile1' title='Edit'>
<img alt='' height='18' src='http://img1.blogblog.com/img/icon18_wrench_allbkg.png' width='18'/>
</a>
</span>
</span>
<div class='clear'></div>
</div>
</div><div class='widget HTML' id='HTML4'>
<div class='widget-content'>
<!-- ZEEF widget start --><iframe src="//zeef.io/block/72?userId=13&max_links=6&font_size=13&color_header_text=ffffff&color_header_background=cc3300&color_body_text=000000&color_link=0000ff&color_link_visited=6699ff" width="255" height="200" frameborder="0" scrolling="no" style="margin:-6px"></iframe><!-- ZEEF widget end -->
</div>
<div class='clear'></div>
<span class='widget-item-control'>
<span class='item-control blog-admin'>
<a class='quickedit' href='//www.blogger.com/rearrange?blogID=5396570633771229267&widgetType=HTML&widgetId=HTML4&action=editWidget&sectionId=sidebar' onclick='return _WidgetManager._PopupConfig(document.getElementById("HTML4"));' target='configHTML4' title='Edit'>
<img alt='' height='18' src='http://img1.blogblog.com/img/icon18_wrench_allbkg.png' width='18'/>
</a>
</span>
</span>
<div class='clear'></div>
</div><div class='widget HTML' id='HTML5'>
<div class='widget-content'>
<!-- ZEEF widget start --><iframe src="//zeef.io/block/24059?userId=13&max_links=6&font_size=13&color_header_text=ffffff&color_header_background=cc3300&color_body_text=000000&color_link=0000ff&color_link_visited=6699ff" width="255" height="200" frameborder="0" scrolling="no" style="margin:-6px"></iframe><!-- ZEEF widget end -->
</div>
<div class='clear'></div>
<span class='widget-item-control'>
<span class='item-control blog-admin'>
<a class='quickedit' href='//www.blogger.com/rearrange?blogID=5396570633771229267&widgetType=HTML&widgetId=HTML5&action=editWidget&sectionId=sidebar' onclick='return _WidgetManager._PopupConfig(document.getElementById("HTML5"));' target='configHTML5' title='Edit'>
<img alt='' height='18' src='http://img1.blogblog.com/img/icon18_wrench_allbkg.png' width='18'/>
</a>
</span>
</span>
<div class='clear'></div>
</div><div class='widget AdSense' id='AdSense1'>
<div class='widget-content'>
<script type="text/javascript"><!--
google_ad_client = "ca-pub-6723217023503446";
google_ad_host = "ca-host-pub-1556223355139109";
google_ad_host_channel = "L0001";
/* balusc_sidebar_AdSense1_250x250_as */
google_ad_slot = "1124032668";
google_ad_width = 250;
google_ad_height = 250;
//-->
</script>
<script type="text/javascript"
src="//pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
<div class='clear'></div>
<span class='widget-item-control'>
<span class='item-control blog-admin'>
<a class='quickedit' href='//www.blogger.com/rearrange?blogID=5396570633771229267&widgetType=AdSense&widgetId=AdSense1&action=editWidget&sectionId=sidebar' onclick='return _WidgetManager._PopupConfig(document.getElementById("AdSense1"));' target='configAdSense1' title='Edit'>
<img alt='' height='18' src='http://img1.blogblog.com/img/icon18_wrench_allbkg.png' width='18'/>
</a>
</span>
</span>
<div class='clear'></div>
</div>
</div><div class='widget HTML' id='HTML1'>
<h2 class='title'>Donate</h2>
<div class='widget-content'>
<p style="font-size:1em;line-height:1em">For the ones who want to express their excessive thanks for my work, I used to have an Amazon wishlist with a list of books, but right now I don't have any interesting books on the list anymore (to anyone who've sent books before: thank you very much, I got 6 books in 6 months). You can always donate something so that I can use it for other stuff, such as Nespresso coffee.
</p>
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" style="text-align:center">
<input type="hidden" name="country" value="US" />
<input type="hidden" name="lc" value="US" />
<input type="hidden" name="cmd" value="_s-xclick" />
<input type="hidden" name="hosted_button_id" value="LBFVVTZN4KKNJ" />
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!" />
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1" />
</form>
</div>
<div class='clear'></div>
<span class='widget-item-control'>
<span class='item-control blog-admin'>
<a class='quickedit' href='//www.blogger.com/rearrange?blogID=5396570633771229267&widgetType=HTML&widgetId=HTML1&action=editWidget&sectionId=sidebar' onclick='return _WidgetManager._PopupConfig(document.getElementById("HTML1"));' target='configHTML1' title='Edit'>
<img alt='' height='18' src='http://img1.blogblog.com/img/icon18_wrench_allbkg.png' width='18'/>
</a>
</span>
</span>
<div class='clear'></div>
</div><div class='widget Label' id='Label1'>
<h2>Tags</h2>
<div class='widget-content'>
<div id='labelCloud'></div>
<p align='center'>
<script type='text/javascript'>
  
  var cloudMin = 1;
  var maxFontSize = 25;
  var maxColor = [204,51,0];
  var minFontSize = 10;
  var minColor = [0,0,0];
  var lcShowCount = false;

  // Don't change anything past this point -----------------
  // Cloud function s() ripped from del.icio.us
  function s(a,b,i,x){
  if(a>b){
  var m=(a-b)/Math.log(x),v=a-Math.floor(Math.log(i)*m)
  }
  else{
  var m=(b-a)/Math.log(x),v=Math.floor(Math.log(i)*m+a)
  }
  return v
  }

var c=[];
  var labelCount = new Array(); 
  var ts = new Object;
  
  var theName = "ActionListener";
  ts[theName] = 1;
  
  var theName = "Ajax";
  ts[theName] = 4;
  
  var theName = "Authentication";
  ts[theName] = 1;
  
  var theName = "CDI";
  ts[theName] = 6;
  
  var theName = "Communication";
  ts[theName] = 3;
  
  var theName = "Composite Component";
  ts[theName] = 1;
  
  var theName = "Converter";
  ts[theName] = 2;
  
  var theName = "CSS";
  ts[theName] = 1;
  
  var theName = "CSV";
  ts[theName] = 1;
  
  var theName = "Custom Component";
  ts[theName] = 2;
  
  var theName = "DAO";
  ts[theName] = 2;
  
  var theName = "DataTable";
  ts[theName] = 3;
  
  var theName = "Design Patterns";
  ts[theName] = 2;
  
  var theName = "Download File";
  ts[theName] = 3;
  
  var theName = "DTO";
  ts[theName] = 5;
  
  var theName = "Dutch";
  ts[theName] = 7;
  
  var theName = "EAR";
  ts[theName] = 1;
  
  var theName = "Eclipse";
  ts[theName] = 5;
  
  var theName = "EJB";
  ts[theName] = 2;
  
  var theName = "Exception-Handling";
  ts[theName] = 1;
  
  var theName = "Facelets";
  ts[theName] = 6;
  
  var theName = "Filter";
  ts[theName] = 5;
  
  var theName = "Focus";
  ts[theName] = 1;
  
  var theName = "Glassfish";
  ts[theName] = 1;
  
  var theName = "Highlight";
  ts[theName] = 1;
  
  var theName = "HTML5";
  ts[theName] = 1;
  
  var theName = "i18n";
  ts[theName] = 1;
  
  var theName = "Immediate";
  ts[theName] = 2;
  
  var theName = "Include";
  ts[theName] = 1;
  
  var theName = "JavaScript";
  ts[theName] = 5;
  
  var theName = "JDBC";
  ts[theName] = 3;
  
  var theName = "JPA";
  ts[theName] = 1;
  
  var theName = "JSF";
  ts[theName] = 36;
  
  var theName = "JSF2";
  ts[theName] = 26;
  
  var theName = "JSP";
  ts[theName] = 12;
  
  var theName = "Managed Bean";
  ts[theName] = 13;
  
  var theName = "Messages";
  ts[theName] = 1;
  
  var theName = "MySQL";
  ts[theName] = 4;
  
  var theName = "OmniFaces";
  ts[theName] = 18;
  
  var theName = "Performance";
  ts[theName] = 6;
  
  var theName = "PhaseListener";
  ts[theName] = 4;
  
  var theName = "POST-Redirect-GET";
  ts[theName] = 2;
  
  var theName = "PrimeFaces";
  ts[theName] = 1;
  
  var theName = "Rant";
  ts[theName] = 4;
  
  var theName = "Renderer";
  ts[theName] = 3;
  
  var theName = "SelectBooleanCheckbox";
  ts[theName] = 1;
  
  var theName = "SelectOneMenu";
  ts[theName] = 3;
  
  var theName = "Servlet";
  ts[theName] = 14;
  
  var theName = "Shiro";
  ts[theName] = 1;
  
  var theName = "StackOverflow";
  ts[theName] = 7;
  
  var theName = "TabbedPanel";
  ts[theName] = 1;
  
  var theName = "Tomahawk";
  ts[theName] = 2;
  
  var theName = "Tomcat";
  ts[theName] = 5;
  
  var theName = "Tutorial";
  ts[theName] = 6;
  
  var theName = "Unicode";
  ts[theName] = 2;
  
  var theName = "Upload File";
  ts[theName] = 5;
  
  var theName = "UseBean";
  ts[theName] = 1;
  
  var theName = "Utility";
  ts[theName] = 4;
  
  var theName = "Validator";
  ts[theName] = 6;
  
  var theName = "ValueChangeListener";
  ts[theName] = 2;
  
  var theName = "Vdldoc";
  ts[theName] = 1;
  
  var theName = "ViewScoped";
  ts[theName] = 2;
  
  var theName = "Weld";
  ts[theName] = 1;
  
  var theName = "Whitespace";
  ts[theName] = 1;
  
  var theName = "WildFly";
  ts[theName] = 1;
  
  var theName = "ZEEF";
  ts[theName] = 3;
  
for (t in ts){
  if (!labelCount[ts[t]]){
  labelCount[ts[t]] = new Array(ts[t])
  }
  }
  var ta=cloudMin-1;
  tz = labelCount.length - cloudMin;
  lc2 = document.getElementById('labelCloud');
  ul = document.createElement('ul');
  ul.className = 'label-cloud';
  for(var t in ts){
  if(ts[t] < cloudMin){
  continue;
  }
  for (var i=0;3 > i;i++) {
  c[i]=s(minColor[i],maxColor[i],ts[t]-ta,tz)
  } 
  var fs = s(minFontSize,maxFontSize,ts[t]-ta,tz);
  li = document.createElement('li');
  li.style.fontSize = fs+'px';
a = document.createElement('a');
  a.title = ts[t]+' Posts in '+t;
  a.style.color = 'rgb('+c[0]+','+c[1]+','+c[2]+')';
  a.href = '/search/label/'+encodeURIComponent(t) + '?max-results=100';
  if (lcShowCount){
  span = document.createElement('span');
  span.innerHTML = '('+ts[t]+') ';
  span.className = 'label-count';
  a.appendChild(document.createTextNode(t));
  li.appendChild(a);
  li.appendChild(span);
  }
  else {
  a.appendChild(document.createTextNode(t));
  li.appendChild(a);
  }
  ul.appendChild(li);
  abnk = document.createTextNode(' ');
  ul.appendChild(abnk);
  }
  lc2.appendChild(ul); 
  </script>
</p>
<noscript>
<ul>
<li>
<a href='http://balusc.blogspot.com/search/label/ActionListener'>ActionListener</a>

  (1)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/Ajax'>Ajax</a>

  (4)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/Authentication'>Authentication</a>

  (1)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/CDI'>CDI</a>

  (6)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/Communication'>Communication</a>

  (3)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/Composite%20Component'>Composite Component</a>

  (1)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/Converter'>Converter</a>

  (2)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/CSS'>CSS</a>

  (1)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/CSV'>CSV</a>

  (1)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/Custom%20Component'>Custom Component</a>

  (2)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/DAO'>DAO</a>

  (2)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/DataTable'>DataTable</a>

  (3)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/Design%20Patterns'>Design Patterns</a>

  (2)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/Download%20File'>Download File</a>

  (3)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/DTO'>DTO</a>

  (5)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/Dutch'>Dutch</a>

  (7)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/EAR'>EAR</a>

  (1)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/Eclipse'>Eclipse</a>

  (5)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/EJB'>EJB</a>

  (2)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/Exception-Handling'>Exception-Handling</a>

  (1)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/Facelets'>Facelets</a>

  (6)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/Filter'>Filter</a>

  (5)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/Focus'>Focus</a>

  (1)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/Glassfish'>Glassfish</a>

  (1)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/Highlight'>Highlight</a>

  (1)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/HTML5'>HTML5</a>

  (1)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/i18n'>i18n</a>

  (1)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/Immediate'>Immediate</a>

  (2)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/Include'>Include</a>

  (1)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/JavaScript'>JavaScript</a>

  (5)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/JDBC'>JDBC</a>

  (3)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/JPA'>JPA</a>

  (1)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/JSF'>JSF</a>

  (36)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/JSF2'>JSF2</a>

  (26)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/JSP'>JSP</a>

  (12)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/Managed%20Bean'>Managed Bean</a>

  (13)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/Messages'>Messages</a>

  (1)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/MySQL'>MySQL</a>

  (4)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/OmniFaces'>OmniFaces</a>

  (18)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/Performance'>Performance</a>

  (6)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/PhaseListener'>PhaseListener</a>

  (4)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/POST-Redirect-GET'>POST-Redirect-GET</a>

  (2)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/PrimeFaces'>PrimeFaces</a>

  (1)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/Rant'>Rant</a>

  (4)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/Renderer'>Renderer</a>

  (3)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/SelectBooleanCheckbox'>SelectBooleanCheckbox</a>

  (1)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/SelectOneMenu'>SelectOneMenu</a>

  (3)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/Servlet'>Servlet</a>

  (14)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/Shiro'>Shiro</a>

  (1)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/StackOverflow'>StackOverflow</a>

  (7)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/TabbedPanel'>TabbedPanel</a>

  (1)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/Tomahawk'>Tomahawk</a>

  (2)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/Tomcat'>Tomcat</a>

  (5)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/Tutorial'>Tutorial</a>

  (6)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/Unicode'>Unicode</a>

  (2)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/Upload%20File'>Upload File</a>

  (5)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/UseBean'>UseBean</a>

  (1)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/Utility'>Utility</a>

  (4)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/Validator'>Validator</a>

  (6)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/ValueChangeListener'>ValueChangeListener</a>

  (2)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/Vdldoc'>Vdldoc</a>

  (1)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/ViewScoped'>ViewScoped</a>

  (2)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/Weld'>Weld</a>

  (1)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/Whitespace'>Whitespace</a>

  (1)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/WildFly'>WildFly</a>

  (1)
  </li>
<li>
<a href='http://balusc.blogspot.com/search/label/ZEEF'>ZEEF</a>

  (3)
  </li>
</ul>
</noscript>
<div class='clear'></div>
<span class='widget-item-control'>
<span class='item-control blog-admin'>
<a class='quickedit' href='//www.blogger.com/rearrange?blogID=5396570633771229267&widgetType=Label&widgetId=Label1&action=editWidget&sectionId=sidebar' onclick='return _WidgetManager._PopupConfig(document.getElementById("Label1"));' target='configLabel1' title='Edit'>
<img alt='' height='18' src='http://img1.blogblog.com/img/icon18_wrench_allbkg.png' width='18'/>
</a>
</span>
</span>
<div class='clear'></div>
</div>
</div><div class='widget BlogArchive' id='BlogArchive1'>
<h2>Articles</h2>
<div class='widget-content'>
<div id='ArchiveList'>
<div id='BlogArchive1_ArchiveList'>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=YEARLY-32503694400000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/search?updated-min=3000-01-01T00:00:00-04:00&amp;updated-max=3001-01-01T00:00:00-04:00&amp;max-results=1'>3000</a>
<span class='post-count' dir='ltr'>(1)</span>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-32503694400000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/3000_01_01_archive.html'>January</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=YEARLY-1388548800000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/search?updated-min=2014-01-01T00:00:00-04:00&amp;updated-max=2015-01-01T00:00:00-04:00&amp;max-results=4'>2014</a>
<span class='post-count' dir='ltr'>(4)</span>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1414814400000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2014_11_01_archive.html'>November</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1412136000000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2014_10_01_archive.html'>October</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1401595200000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2014_06_01_archive.html'>June</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1388548800000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2014_01_01_archive.html'>January</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=YEARLY-1357012800000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/search?updated-min=2013-01-01T00:00:00-04:00&amp;updated-max=2014-01-01T00:00:00-04:00&amp;max-results=11'>2013</a>
<span class='post-count' dir='ltr'>(11)</span>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1380600000000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2013_10_01_archive.html'>October</a>
<span class='post-count' dir='ltr'>(2)</span>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1378008000000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2013_09_01_archive.html'>September</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1372651200000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2013_07_01_archive.html'>July</a>
<span class='post-count' dir='ltr'>(2)</span>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1370059200000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2013_06_01_archive.html'>June</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1364788800000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2013_04_01_archive.html'>April</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1362110400000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2013_03_01_archive.html'>March</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1359691200000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2013_02_01_archive.html'>February</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1357012800000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2013_01_01_archive.html'>January</a>
<span class='post-count' dir='ltr'>(2)</span>
</li>
</ul>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=YEARLY-1325390400000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/search?updated-min=2012-01-01T00:00:00-04:00&amp;updated-max=2013-01-01T00:00:00-04:00&amp;max-results=12'>2012</a>
<span class='post-count' dir='ltr'>(12)</span>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1354334400000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2012_12_01_archive.html'>December</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1351742400000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2012_11_01_archive.html'>November</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1349064000000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2012_10_01_archive.html'>October</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1341115200000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2012_07_01_archive.html'>July</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1338523200000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2012_06_01_archive.html'>June</a>
<span class='post-count' dir='ltr'>(2)</span>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1335844800000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2012_05_01_archive.html'>May</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1330574400000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2012_03_01_archive.html'>March</a>
<span class='post-count' dir='ltr'>(5)</span>
</li>
</ul>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=YEARLY-1293854400000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/search?updated-min=2011-01-01T00:00:00-04:00&amp;updated-max=2012-01-01T00:00:00-04:00&amp;max-results=2'>2011</a>
<span class='post-count' dir='ltr'>(2)</span>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1314849600000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2011_09_01_archive.html'>September</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1293854400000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2011_01_01_archive.html'>January</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=YEARLY-1262318400000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/search?updated-min=2010-01-01T00:00:00-04:00&amp;updated-max=2011-01-01T00:00:00-04:00&amp;max-results=10'>2010</a>
<span class='post-count' dir='ltr'>(10)</span>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1285905600000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2010_10_01_archive.html'>October</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1283313600000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2010_09_01_archive.html'>September</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1280635200000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2010_08_01_archive.html'>August</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1277956800000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2010_07_01_archive.html'>July</a>
<span class='post-count' dir='ltr'>(2)</span>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1275364800000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2010_06_01_archive.html'>June</a>
<span class='post-count' dir='ltr'>(2)</span>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1270094400000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2010_04_01_archive.html'>April</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1262318400000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2010_01_01_archive.html'>January</a>
<span class='post-count' dir='ltr'>(2)</span>
</li>
</ul>
</li>
</ul>
<ul>
<li class='archivedate expanded'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=close&toggle=YEARLY-1230782400000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy toggle-open'>&#9660; </span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/search?updated-min=2009-01-01T00:00:00-04:00&amp;updated-max=2010-01-01T00:00:00-04:00&amp;max-results=7'>2009</a>
<span class='post-count' dir='ltr'>(7)</span>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1259640000000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2009_12_01_archive.html'>December</a>
<span class='post-count' dir='ltr'>(2)</span>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1251777600000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2009_09_01_archive.html'>September</a>
<span class='post-count' dir='ltr'>(2)</span>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1241150400000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2009_05_01_archive.html'>May</a>
<span class='post-count' dir='ltr'>(2)</span>
</li>
</ul>
<ul>
<li class='archivedate expanded'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=close&toggle=MONTHLY-1233460800000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy toggle-open'>&#9660; </span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2009_02_01_archive.html'>February</a>
<span class='post-count' dir='ltr'>(1)</span>
<ul class='posts'>
<li><a href='http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html'>FileServlet supporting resume and caching and GZIP...</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=YEARLY-1199160000000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/search?updated-min=2008-01-01T00:00:00-04:00&amp;updated-max=2009-01-01T00:00:00-04:00&amp;max-results=7'>2008</a>
<span class='post-count' dir='ltr'>(7)</span>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1222833600000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2008_10_01_archive.html'>October</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1220241600000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2008_09_01_archive.html'>September</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1217563200000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2008_08_01_archive.html'>August</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1214884800000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2008_07_01_archive.html'>July</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1212292800000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2008_06_01_archive.html'>June</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1201838400000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2008_02_01_archive.html'>February</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1199160000000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2008_01_01_archive.html'>January</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=YEARLY-1167624000000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/search?updated-min=2007-01-01T00:00:00-04:00&amp;updated-max=2008-01-01T00:00:00-04:00&amp;max-results=19'>2007</a>
<span class='post-count' dir='ltr'>(19)</span>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1196481600000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2007_12_01_archive.html'>December</a>
<span class='post-count' dir='ltr'>(4)</span>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1193889600000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2007_11_01_archive.html'>November</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1191211200000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2007_10_01_archive.html'>October</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1188619200000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2007_09_01_archive.html'>September</a>
<span class='post-count' dir='ltr'>(4)</span>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1185940800000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2007_08_01_archive.html'>August</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1183262400000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2007_07_01_archive.html'>July</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1175400000000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2007_04_01_archive.html'>April</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1172721600000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2007_03_01_archive.html'>March</a>
<span class='post-count' dir='ltr'>(4)</span>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1167624000000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2007_01_01_archive.html'>January</a>
<span class='post-count' dir='ltr'>(2)</span>
</li>
</ul>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=YEARLY-1136088000000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/search?updated-min=2006-01-01T00:00:00-04:00&amp;updated-max=2007-01-01T00:00:00-04:00&amp;max-results=22'>2006</a>
<span class='post-count' dir='ltr'>(22)</span>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1157083200000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2006_09_01_archive.html'>September</a>
<span class='post-count' dir='ltr'>(1)</span>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1149134400000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2006_06_01_archive.html'>June</a>
<span class='post-count' dir='ltr'>(8)</span>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1146456000000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2006_05_01_archive.html'>May</a>
<span class='post-count' dir='ltr'>(2)</span>
</li>
</ul>
<ul>
<li class='archivedate collapsed'>
<a class='toggle' href='//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html?widgetType=BlogArchive&widgetId=BlogArchive1&action=toggle&dir=open&toggle=MONTHLY-1143864000000&toggleopen=MONTHLY-1233460800000'>
<span class='zippy'>

	&#9658;
	
</span>
</a>
<a class='post-count-link' href='http://balusc.blogspot.com/2006_04_01_archive.html'>April</a>
<span class='post-count' dir='ltr'>(11)</span>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div class='clear'></div>
<span class='widget-item-control'>
<span class='item-control blog-admin'>
<a class='quickedit' href='//www.blogger.com/rearrange?blogID=5396570633771229267&widgetType=BlogArchive&widgetId=BlogArchive1&action=editWidget&sectionId=sidebar' onclick='return _WidgetManager._PopupConfig(document.getElementById("BlogArchive1"));' target='configBlogArchive1' title='Edit'>
<img alt='' height='18' src='http://img1.blogblog.com/img/icon18_wrench_allbkg.png' width='18'/>
</a>
</span>
</span>
<div class='clear'></div>
</div>
<script type='text/javascript'>
</script>
</div><div class='widget Followers' id='Followers1'>
<h2 class='title'>Followers</h2>
<div class='widget-content'>
<div id='Followers1-wrapper'>
<div style='margin-right:2px;'>
<script type="text/javascript">
        if (!window.google || !google.friendconnect) {
          document.write('<script type="text/javascript"' +
              'src="//www.google.com/friendconnect/script/friendconnect.js">' +
              '</scr' + 'ipt>');
        }
      </script>
<script type="text/javascript">
      if (!window.registeredBloggerCallbacks) {
        window.registeredBloggerCallbacks = true;

        

        
        gadgets.rpc.register('requestReload', function() {
          document.location.reload();
        });

        
        gadgets.rpc.register('requestSignOut', function(siteId) {
          
          google.friendconnect.container.openSocialSiteId = siteId;
          google.friendconnect.requestSignOut();
        });
      }
    </script>
<script type="text/javascript">
    
    function registerGetBlogUrls() {
      gadgets.rpc.register('getBlogUrls', function() {
        var holder = {};
        
          
            
            
              holder.currentPost = "http://www.blogger.com/feeds/5396570633771229267/posts/default/5771569684313566405";
            
            
            
              holder.currentComments = "http://www.blogger.com/feeds/5396570633771229267/5771569684313566405/comments/default";
            
            holder.currentPostUrl = "";
            holder.currentPostId = 5771569684313566405
          
          
          
            holder.postFeed = "http://www.blogger.com/feeds/5396570633771229267/posts/default";
          
          
          
            holder.commentFeed = "http://www.blogger.com/feeds/5396570633771229267/comments/default";
          
          holder.currentBlogUrl = "http://balusc.blogspot.com/";
          holder.currentBlogId = "5396570633771229267";
        
        return holder;
      });
    }
  </script>
<script type="text/javascript">
  if (!window.registeredCommonBloggerCallbacks) {
    window.registeredCommonBloggerCallbacks = true;

    gadgets.rpc.register('resize_iframe', function(height) {
      var el = document.getElementById(this['f']);
      if (el) {
        el.style.height = height + 'px';
      }
    });

    
    gadgets.rpc.register('set_pref', function() {});

    registerGetBlogUrls();
  }
  </script>
<div id="div-aj2xlit9clky" style="width: 100%; "></div>
<script type="text/javascript">
    var skin = {};
    skin['FACE_SIZE'] = '32';
    skin['HEIGHT'] = "260";
    skin['TITLE'] = "Followers";
    skin['BORDER_COLOR'] = "transparent";
    skin['ENDCAP_BG_COLOR'] = "transparent";
    skin['ENDCAP_TEXT_COLOR'] = "#000000";
    skin['ENDCAP_LINK_COLOR'] = "#000000";
    skin['ALTERNATE_BG_COLOR'] = "transparent";
    
    skin['CONTENT_BG_COLOR'] = "transparent";
    skin['CONTENT_LINK_COLOR'] = "#000000";
    skin['CONTENT_TEXT_COLOR'] = "#000000";
    skin['CONTENT_SECONDARY_LINK_COLOR'] = "#FFFFFF";
    skin['CONTENT_SECONDARY_TEXT_COLOR'] = "#000000";
    skin['CONTENT_HEADLINE_COLOR'] = "#000000";
    skin['FONT_FACE'] = "Arial";
    google.friendconnect.container.setParentUrl("/");
    google.friendconnect.container["renderMembersGadget"](
    {id: "div-aj2xlit9clky",
     height: 260,
     
     
     
     site: "05449702140055335928",
     
     locale: 'en' },
     skin);
  </script>
</div>
</div>
<div class='clear'></div>
<span class='widget-item-control'>
<span class='item-control blog-admin'>
<a class='quickedit' href='//www.blogger.com/rearrange?blogID=5396570633771229267&widgetType=Followers&widgetId=Followers1&action=editWidget&sectionId=sidebar' onclick='return _WidgetManager._PopupConfig(document.getElementById("Followers1"));' target='configFollowers1' title='Edit'>
<img alt='' height='18' src='http://img1.blogblog.com/img/icon18_wrench_allbkg.png' width='18'/>
</a>
</span>
</span>
<div class='clear'></div>
</div>
</div></div>
</div>
<!-- spacer for skins that want sidebar and main to be the same height-->
<div class='clear'>&#160;</div>
</div>
<div id='footer-wrapper'>
<div class='footer section' id='footer'></div>
</div>
</div>
</div>
<script type='text/javascript'>
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type='text/javascript'>
try {
var pageTracker = _gat._getTracker("UA-2553931-1");
pageTracker._trackPageview();
} catch(err) {}</script>
<script type="text/javascript">
if (window.jstiming) window.jstiming.load.tick('widgetJsBefore');
</script><script type="text/javascript" src="https://www.blogger.com/static/v1/widgets/3739804914-widgets.js"></script>
<script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
<script type='text/javascript'>
if (typeof(BLOG_attachCsiOnload) != 'undefined' && BLOG_attachCsiOnload != null) { window['blogger_templates_experiment_id'] = "templatesV1";window['blogger_blog_id'] = '5396570633771229267';BLOG_attachCsiOnload('item_'); }_WidgetManager._Init('//www.blogger.com/rearrange?blogID\x3d5396570633771229267','//balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html','5396570633771229267');
_WidgetManager._SetDataContext([{'name': 'blog', 'data': {'blogId': '5396570633771229267', 'bloggerUrl': 'http://www.blogger.com', 'title': 'The BalusC Code', 'pageType': 'item', 'postId': '5771569684313566405', 'url': 'http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html', 'canonicalUrl': 'http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html', 'canonicalHomepageUrl': 'http://balusc.blogspot.com/', 'homepageUrl': 'http://balusc.blogspot.com/', 'blogspotFaviconUrl': 'http://balusc.blogspot.com/favicon.ico', 'enabledCommentProfileImages': true, 'adultContent': false, 'disableAdSenseWidget': false, 'analyticsAccountNumber': '', 'searchLabel': '', 'searchQuery': '', 'pageName': 'FileServlet supporting resume and caching and GZIP', 'pageTitle': 'The BalusC Code: FileServlet supporting resume and caching and GZIP', 'encoding': 'UTF-8', 'locale': 'en', 'localeUnderscoreDelimited': 'en', 'isPrivate': false, 'isMobile': false, 'isMobileRequest': false, 'mobileClass': '', 'isPrivateBlog': false, 'languageDirection': 'ltr', 'feedLinks': '\74link rel\75\42alternate\42 type\75\42application/atom+xml\42 title\75\42The BalusC Code - Atom\42 href\75\42http://balusc.blogspot.com/feeds/posts/default\42 /\76\n\74link rel\75\42alternate\42 type\75\42application/rss+xml\42 title\75\42The BalusC Code - RSS\42 href\75\42http://balusc.blogspot.com/feeds/posts/default?alt\75rss\42 /\76\n\74link rel\75\42service.post\42 type\75\42application/atom+xml\42 title\75\42The BalusC Code - Atom\42 href\75\42http://www.blogger.com/feeds/5396570633771229267/posts/default\42 /\76\n\n\74link rel\75\42alternate\42 type\75\42application/atom+xml\42 title\75\42The BalusC Code - Atom\42 href\75\42http://balusc.blogspot.com/feeds/5771569684313566405/comments/default\42 /\76\n', 'meTag': '', 'openIdOpTag': '', 'googleProfileUrl': 'https://plus.google.com/113917986381339001702', 'latencyHeadScript': '\74script type\75\42text/javascript\42\76(function() { var b\75window,f\75\42chrome\42,g\75\42tick\42,k\75\42jstiming\42;(function(){function d(a){this.t\75{};this.tick\75function(a,d,c){var e\75void 0!\75c?c:(new Date).getTime();this.t[a]\75[e,d];if(void 0\75\75c)try{b.console.timeStamp(\42CSI/\42+a)}catch(h){}};this[g](\42start\42,null,a)}var a;b.performance\46\46(a\75b.performance.timing);var n\75a?new d(a.responseStart):new d;b.jstiming\75{Timer:d,load:n};if(a){var c\75a.navigationStart,h\75a.responseStart;0\74c\46\46h\76\75c\46\46(b[k].srt\75h-c)}if(a){var e\75b[k].load;0\74c\46\46h\76\75c\46\46(e[g](\42_wtsrt\42,void 0,c),e[g](\42wtsrt_\42,\42_wtsrt\42,h),e[g](\42tbsd_\42,\42wtsrt_\42))}try{a\75null,\nb[f]\46\46b[f].csi\46\46(a\75Math.floor(b[f].csi().pageT),e\46\0460\74c\46\46(e[g](\42_tbnd\42,void 0,b[f].csi().startE),e[g](\42tbnd_\42,\42_tbnd\42,c))),null\75\75a\46\46b.gtbExternal\46\46(a\75b.gtbExternal.pageT()),null\75\75a\46\46b.external\46\46(a\75b.external.pageT,e\46\0460\74c\46\46(e[g](\42_tbnd\42,void 0,b.external.startE),e[g](\42tbnd_\42,\42_tbnd\42,c))),a\46\46(b[k].pt\75a)}catch(p){}})();b.tickAboveFold\75function(d){var a\0750;if(d.offsetParent){do a+\75d.offsetTop;while(d\75d.offsetParent)}d\75a;750\76\75d\46\46b[k].load[g](\42aft\42)};var l\75!1;function m(){l||(l\75!0,b[k].load[g](\42firstScrollTime\42))}b.addEventListener?b.addEventListener(\42scroll\42,m,!1):b.attachEvent(\42onscroll\42,m);\n })();\74/script\076', 'mobileHeadScript': '', 'adsenseClientId': 'ca-pub-6723217023503446', 'view': '', 'dynamicViewsCommentsSrc': '//www.blogblog.com/dynamicviews/4224c15c4e7c9321/js/comments.js', 'dynamicViewsScriptSrc': '//www.blogblog.com/dynamicviews/76f25a6f2e06af76', 'plusOneApiSrc': 'https://apis.google.com/js/plusone.js', 'sf': 'n', 'tf': ''}}, {'name': 'skin', 'data': {'vars': {}, 'override': ''}}, {'name': 'view', 'data': {'classic': {'name': 'classic', 'url': '?view\75classic'}, 'flipcard': {'name': 'flipcard', 'url': '?view\75flipcard'}, 'magazine': {'name': 'magazine', 'url': '?view\75magazine'}, 'mosaic': {'name': 'mosaic', 'url': '?view\75mosaic'}, 'sidebar': {'name': 'sidebar', 'url': '?view\75sidebar'}, 'snapshot': {'name': 'snapshot', 'url': '?view\75snapshot'}, 'timeslide': {'name': 'timeslide', 'url': '?view\75timeslide'}}}]);
_WidgetManager._RegisterWidget('_NavbarView', new _WidgetInfo('Navbar1', 'navbar', null, document.getElementById('Navbar1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_HeaderView', new _WidgetInfo('Header1', 'header', null, document.getElementById('Header1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_HTMLView', new _WidgetInfo('HTML2', 'main', null, document.getElementById('HTML2'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_BlogView', new _WidgetInfo('Blog1', 'main', null, document.getElementById('Blog1'), {'cmtInteractionsEnabled': false, 'lightboxEnabled': true, 'lightboxModuleUrl': 'https://www.blogger.com/static/v1/jsbin/2355179239-lbx.js', 'lightboxCssUrl': 'https://www.blogger.com/static/v1/v-css/2392111094-lightbox_bundle.css'}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_ProfileView', new _WidgetInfo('Profile1', 'sidebar', null, document.getElementById('Profile1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_HTMLView', new _WidgetInfo('HTML4', 'sidebar', null, document.getElementById('HTML4'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_HTMLView', new _WidgetInfo('HTML5', 'sidebar', null, document.getElementById('HTML5'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_AdSenseView', new _WidgetInfo('AdSense1', 'sidebar', null, document.getElementById('AdSense1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_HTMLView', new _WidgetInfo('HTML1', 'sidebar', null, document.getElementById('HTML1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_LabelView', new _WidgetInfo('Label1', 'sidebar', null, document.getElementById('Label1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_BlogArchiveView', new _WidgetInfo('BlogArchive1', 'sidebar', null, document.getElementById('BlogArchive1'), {'languageDirection': 'ltr'}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_FollowersView', new _WidgetInfo('Followers1', 'sidebar', null, document.getElementById('Followers1'), {}, 'displayModeFull'));
</script>
</body>
</html>